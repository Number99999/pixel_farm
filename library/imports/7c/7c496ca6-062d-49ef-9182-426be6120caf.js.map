{"version":3,"sources":["assets\\script\\ui\\skill_content.js"],"names":["user_data","require","cc","Class","Component","properties","name_frame","Sprite","icon_frame","button_frame","level_label","Label","introduce_label","progress","ProgressBar","name_frame_arr","SpriteFrame","icon_frame_arr","button_frame_arr","ini_node","skill_index","game_scene_js","find","getComponent","game_rules_js","sound_control","set_content","gold_max","skill","speed_the_cut","water_saving","tool_improve","labor_contract","offline_profit","spriteFrame","string","node","active","update_button","skill_point","Button","interactable","callback","i","schedule","on_button_click","set_gold_progress","play_sound_effect","create_tips_ui","onLoad","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["var user_data = require(\"user_data\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        name_frame: cc.Sprite,\n        icon_frame: cc.Sprite,\n        button_frame: cc.Sprite,\n        level_label: cc.Label,\n        introduce_label: cc.Label,\n        progress: cc.ProgressBar,\n        name_frame_arr: [cc.SpriteFrame],\n        icon_frame_arr: [cc.SpriteFrame],\n        button_frame_arr: [cc.SpriteFrame],\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n    ini_node: function (skill_index) {\n        this.game_scene_js = cc.find(\"UI_ROOT\").getComponent(\"game_scene\");\n        this.game_rules_js = cc.find(\"UI_ROOT\").getComponent(\"game_rules\");\n        this.sound_control = cc.find(\"sound_control\").getComponent(\"sound_control\");\n        this.skill_index = skill_index;\n        this.set_content();\n    },\n    set_content: function () {\n        var gold_max = user_data.user_data.skill[\"gold_max\"];\n        var speed_the_cut = user_data.user_data.skill[\"speed_the_cut\"];\n        var water_saving = user_data.user_data.skill[\"water_saving\"];\n        var tool_improve = user_data.user_data.skill[\"tool_improve\"];\n        var labor_contract = user_data.user_data.skill[\"labor_contract\"];\n        var offline_profit = user_data.user_data.skill[\"offline_profit\"];\n        switch (this.skill_index) {\n            case 0:\n                this.icon_frame.spriteFrame = this.icon_frame_arr[this.skill_index];\n                this.name_frame.spriteFrame = this.name_frame_arr[this.skill_index];\n                this.button_frame.spriteFrame = this.button_frame_arr[0];\n                this.introduce_label.string = \"Max gold: \" + (500 * gold_max + 500);\n                this.level_label.string = \"lv: \" + gold_max;\n                this.progress.progress = gold_max / 200;\n                if (gold_max >= 200) {\n                    this.button_frame.node.active = false;\n                }\n                else this.button_frame.node.active=true;\n                break;\n            case 1:\n                this.icon_frame.spriteFrame = this.icon_frame_arr[this.skill_index];\n                this.name_frame.spriteFrame = this.name_frame_arr[this.skill_index];\n                this.button_frame.spriteFrame = this.button_frame_arr[0];\n                this.introduce_label.string = \"Harvest plants faster \" + (speed_the_cut + 1) + \"%\";\n                this.level_label.string = \"lv: \" + speed_the_cut;\n                this.progress.progress = speed_the_cut / 99;\n                if (speed_the_cut >= 99) {\n                    this.button_frame.node.active = false;\n                }\n                else this.button_frame.node.active=true;\n                break;\n            case 2:\n                this.icon_frame.spriteFrame = this.icon_frame_arr[this.skill_index];\n                this.name_frame.spriteFrame = this.name_frame_arr[this.skill_index];\n                this.button_frame.spriteFrame = this.button_frame_arr[0];\n                this.introduce_label.string = \"Plant growth consumes less resource \" + (water_saving + 1) + \"%\";\n                this.level_label.string = \"lv: \" + water_saving;\n                this.progress.progress = water_saving / 99;\n                if (water_saving >= 99) {\n                    this.button_frame.node.active = false;\n                }\n                else this.button_frame.node.active=true;\n                break;\n            case 3:\n                this.icon_frame.spriteFrame = this.icon_frame_arr[this.skill_index];\n                this.name_frame.spriteFrame = this.name_frame_arr[this.skill_index];\n                this.button_frame.spriteFrame = this.button_frame_arr[0];\n                this.introduce_label.string = \"Faster planting \" + (tool_improve + 1) + \"%\";\n                this.level_label.string = \"lv: \" + tool_improve;\n                this.progress.progress = tool_improve / 99;\n                if (tool_improve >= 99) {\n                    this.button_frame.node.active = false;\n                }\n                else this.button_frame.node.active=true;\n                break;\n            case 4:\n                this.icon_frame.spriteFrame = this.icon_frame_arr[this.skill_index];\n                this.name_frame.spriteFrame = this.name_frame_arr[this.skill_index];\n                this.button_frame.spriteFrame = this.button_frame_arr[0];\n                this.introduce_label.string = \"Extend worker hours \" + (labor_contract + 1) + \" \\nseconds\";\n                this.level_label.string = \"lv: \" + labor_contract;\n                this.progress.progress = labor_contract / 99;\n                if (labor_contract >= 99) {\n                    this.button_frame.node.active = false;\n                }\n                else this.button_frame.node.active=true;\n                break;\n            case 5:\n                this.icon_frame.spriteFrame = this.icon_frame_arr[this.skill_index];\n                this.name_frame.spriteFrame = this.name_frame_arr[this.skill_index];\n                this.button_frame.spriteFrame = this.button_frame_arr[0];\n                this.introduce_label.string = \"Extra every 5 minutes \" + (offline_profit + 1) + \" \\ngold\";\n                this.level_label.string = \"lv: \" + offline_profit;\n                this.progress.progress = offline_profit / 99;\n                if (offline_profit >= 99) {\n                    this.button_frame.node.active = false;\n                }\n                else this.button_frame.node.active=true;\n                break;\n            default:\n                return;\n        };\n    },\n    //刷新button\n    update_button() {\n        if (user_data.user_data.skill_point > 0) {\n            this.button_frame.node.getComponent(cc.Button).interactable = true;\n        } else {\n            this.button_frame.node.getComponent(cc.Button).interactable = false;\n        };\n        var callback = function () {\n            if (user_data.user_data.skill_point > 0) {\n                this.button_frame.node.getComponent(cc.Button).interactable = true;\n            } else {\n                this.button_frame.node.getComponent(cc.Button).interactable = false;\n            };\n            for(let i =0; i<6; i++)\n            {\n                \n            }\n\n        };\n\n        this.schedule(callback, 0.5);\n    },\n    on_button_click: function () {\n        if (user_data.user_data.skill_point >= 1) {\n            user_data.user_data.skill_point--;\n            switch (this.skill_index) {\n                case 0:\n                    user_data.user_data.skill[\"gold_max\"]++;\n                    this.game_rules_js.set_gold_progress();\n                    break;\n                case 1:\n                    user_data.user_data.skill[\"speed_the_cut\"]++;\n                    break;\n                case 2:\n                    user_data.user_data.skill[\"water_saving\"]++;\n                    break;\n                case 3:\n                    user_data.user_data.skill[\"tool_improve\"]++;\n                    break;\n                case 4:\n                    user_data.user_data.skill[\"labor_contract\"]++;\n                    break;\n                case 5:\n                    user_data.user_data.skill[\"offline_profit\"]++;\n                    break;\n            };\n            this.set_content();\n            this.sound_control.play_sound_effect(\"button_click\");\n        } else {\n            this.sound_control.play_sound_effect(\"un_click\");\n            this.game_scene_js.create_tips_ui(this.game_rules_js.node, \"no_skill_point\");\n            return;\n        };\n\n    },\n    onLoad() {\n\n\n    },\n\n    start() {\n        this.update_button();\n    },\n\n    // update (dt) {},\n});\n"]}