{"version":3,"sources":["assets\\script\\ui\\staff_ui.js"],"names":["user_data","require","cc","Class","Component","properties","staff_group_node","Node","staff_content_prefab","Prefab","have_tips_group","buy_tips_group","ini_node","game_scene_js","find","getComponent","ad_control","sound_control","show_bannerAd","update_buy_tips","set_icon","i","children","length","land","have","color","Button","interactable","staff","active","arr","Object","keys","gold","config","cost","update_schedule","callback","schedule","on_staff_click","e","staff_index","play_sound_effect","node","instantiate","parent","touch_exit","hide_bannerAd","on_node_kill","onLoad","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["var user_data = require(\"user_data\");\nimport config from \"config\";\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        staff_group_node: cc.Node,\n        staff_content_prefab: cc.Prefab,\n        have_tips_group: cc.Node,\n        buy_tips_group: cc.Node,\n    },\n    //\n    ini_node: function () {\n        this.game_scene_js = cc.find(\"UI_ROOT\").getComponent(\"game_scene\");\n        this.ad_control = cc.find(\"ad_control\").getComponent(\"ad_control\");\n        this.sound_control = cc.find(\"sound_control\").getComponent(\"sound_control\");\n        this.ad_control.show_bannerAd();\n        this.update_buy_tips();\n        this.set_icon();\n    },\n    //\n    set_icon: function () {\n        for (var i = 0; i < this.staff_group_node.children.length; i++) {\n            if (user_data.user_data.land[i].have == 1) {\n                this.staff_group_node.children[i].color = new cc.color(255, 255, 255);\n                this.staff_group_node.children[i].getComponent(cc.Button).interactable = true;\n                if (user_data.user_data.staff[i].have == 1) {\n                    this.have_tips_group.children[i].active = true;\n                };\n            } else {\n                this.staff_group_node.children[i].color = new cc.color(0, 0, 0);\n                this.staff_group_node.children[i].getComponent(cc.Button).interactable = false;;\n                this.have_tips_group.children[i].active = false;\n            };\n        };\n    },\n    //刷新购买提示\n    update_buy_tips() {\n        var arr = Object.keys(user_data.user_data.land);\n        for (var i = 0; i < arr.length; i++) {\n            //已解锁土地 金币满足，且未拥有才会显示\n            if (user_data.user_data.land[i].have == 1 && user_data.user_data.gold >= config.staff[i].cost && user_data.user_data.staff[i].have == 0) {\n                this.buy_tips_group.children[i].active = true;\n            } else {\n                this.buy_tips_group.children[i].active = false;\n            };\n        };\n    },\n    //刷新数据定时器\n    update_schedule() {\n        var callback = function () {\n            this.update_buy_tips();\n            this.set_icon();\n        };\n        this.schedule(callback, 0.5);\n    },\n    //\n    on_staff_click: function (e, staff_index) {\n        this.sound_control.play_sound_effect(\"button_click\");\n        var node = cc.instantiate(this.staff_content_prefab);\n        node.getComponent(\"staff_content\").ini_node(staff_index);\n        node.parent = this.node;\n    },\n    touch_exit: function () {\n        this.sound_control.play_sound_effect(\"button_exit\");\n        this.ad_control.hide_bannerAd();\n        this.game_scene_js.on_node_kill(this.node);\n    },\n    onLoad() {\n\n    },\n\n    start() {\n        this.update_schedule();\n    },\n\n    // update (dt) {},\n});\n"]}