{"version":3,"sources":["assets\\script\\ui\\staff_content.js"],"names":["user_data","require","config","cc","Class","Component","properties","icon_sprite","Sprite","work_time_label","Label","rest_time_label","cost_label","icon_frame_arr","SpriteFrame","buy_button","Node","work_time_buff_label","rest_time_buff_label","employed_button","name_lable","introduce_label","ini_node","staff_index","game_scene_js","find","getComponent","game_rules_js","ad_control","sound_control","update_content","create_ad_car","spriteFrame","string","staff","work_time","rest_time","name","introduce","skill","node","active","trader","cost","have","on_buy_button_click","gold","add_gold","create_staff","create_tips_ui","play_sound_effect","touch_exit","destroy","all_capacity","price_difference","hide_bannerAd","onLoad","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["var user_data = require(\"user_data\");\nvar config = require(\"config\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        icon_sprite: cc.Sprite,\n        work_time_label: cc.Label,\n        rest_time_label: cc.Label,\n        cost_label: cc.Label,\n        icon_frame_arr: [cc.SpriteFrame],\n        buy_button: cc.Node,\n        work_time_buff_label: cc.Label,\n        rest_time_buff_label: cc.Label,\n        employed_button: cc.Node,\n        name_lable: cc.Label,\n        introduce_label: cc.Label,\n    },\n    //ini node\n    ini_node: function (staff_index) {\n        this.game_scene_js = cc.find(\"UI_ROOT\").getComponent(\"game_scene\");\n        this.game_rules_js = cc.find(\"UI_ROOT\").getComponent(\"game_rules\");\n        this.ad_control = cc.find(\"ad_control\").getComponent(\"ad_control\");\n        this.sound_control = cc.find(\"sound_control\").getComponent(\"sound_control\");\n        this.staff_index = staff_index;\n        this.update_content();\n        this.create_ad_car();\n    },\n    //刷新数据\n    update_content() {\n        this.icon_sprite.spriteFrame = this.icon_frame_arr[this.staff_index];\n        this.work_time_label.string = \"Active time:\" + config.staff[this.staff_index].work_time + \"seconds\";\n        this.rest_time_label.string = \"Free time:\" + config.staff[this.staff_index].rest_time + \"seconds\";\n        this.name_lable.string = config.staff[this.staff_index].name;\n        this.introduce_label.string = config.staff[this.staff_index].introduce;\n        //技能提示\n        if (user_data.user_data.skill[\"labor_contract\"] == 0) {\n            this.work_time_buff_label.node.active = false;\n        } else {\n            this.work_time_buff_label.node.active = true;\n            this.work_time_buff_label.string = \"+\" + user_data.user_data.skill[\"labor_contract\"];\n        };\n        if (user_data.user_data.trader[\"recipes\"] == 0) {\n            this.rest_time_buff_label.node.active = false;\n        } else {\n            this.rest_time_buff_label.node.active = true;\n            this.rest_time_buff_label.string = \"-\" + user_data.user_data.trader[\"recipes\"];\n        };\n\n        this.cost_label.string = \"Cost:\" + config.staff[this.staff_index].cost;\n        if (user_data.user_data.staff[this.staff_index].have == 0) {\n            this.buy_button.active = true;\n            this.employed_button.active = false;\n        } else {\n            this.buy_button.active = false;\n            this.employed_button.active = true;\n        };\n    },\n    //buy staff\n    on_buy_button_click: function () {\n        if (user_data.user_data.gold >= config.staff[this.staff_index].cost) {\n            this.game_rules_js.add_gold(-config.staff[this.staff_index].cost);\n            user_data.user_data.staff[this.staff_index].have = 1;\n            this.game_rules_js.create_staff(this.staff_index);\n            var node = this.game_scene_js.create_tips_ui(this.game_rules_js.node, \"empoly_succes\");\n            this.buy_button.active = false;\n            this.sound_control.play_sound_effect(\"button_click\");\n            this.update_content();\n        } else {\n            this.sound_control.play_sound_effect(\"un_click\");\n            var node = this.game_scene_js.create_tips_ui(this.game_rules_js.node, \"no_money\");\n        };\n    },\n    touch_exit: function () {\n        this.sound_control.play_sound_effect(\"button_exit\");\n        this.node.destroy();\n    },\n    //创建ad_car\n    create_ad_car() {\n        if (user_data.user_data.staff[this.staff_index].have != 1) {\n            var gold = user_data.user_data.gold;\n            var all_capacity = 500 * user_data.user_data.skill[\"gold_max\"] + 500;\n            var cost = (config.staff[this.staff_index].cost);\n            //差价\n            var price_difference = cost - gold;\n            //大于4/5,且能够拥有，且金币不足\n            if (gold >= cost * (4 / 5) && all_capacity >= cost && gold < cost) {\n                this.ad_control.hide_bannerAd();\n                this.game_scene_js.create_ad_car(this.node, price_difference);\n            };\n        } else {\n            return;\n        }\n\n    },\n    onLoad() {\n\n    },\n\n    start() {\n\n    },\n\n    // update (dt) {},\n});\n"]}