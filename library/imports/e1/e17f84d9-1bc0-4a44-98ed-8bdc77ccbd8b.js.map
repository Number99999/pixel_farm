{"version":3,"sources":["assets\\script\\ui\\shop_content.js"],"names":["cc","Class","Component","properties","name_label","Label","cost_label","need_level_label","gold_icon_node","Node","plant_icon_frame_arr","SpriteFrame","land_frame","icon_sprite","Sprite","have_icon_node","button_tips_node","ini_node","type","index","game_scene_js","find","getComponent","game_rules_js","sound_control","active","update_content","callback","gold","user_data","level","string","config","land","name","spriteFrame","have","node","need_level","cost","plant","schedule","on_button_click","play_sound_effect","create_shop_buy_ui","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["import user_data from \"user_data\";\r\nimport config from \"config\";\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        name_label: cc.Label,\r\n        cost_label: cc.Label,\r\n        need_level_label: cc.Label,\r\n        gold_icon_node: cc.Node,\r\n        plant_icon_frame_arr: [cc.SpriteFrame],\r\n        land_frame: cc.SpriteFrame,\r\n        icon_sprite: cc.Sprite,\r\n        have_icon_node: cc.Node,\r\n        button_tips_node: cc.Node,\r\n    },\r\n    //初始化\r\n    ini_node(type, index) {\r\n        this.index = index;\r\n        this.type = type;\r\n        this.game_scene_js = cc.find(\"UI_ROOT\").getComponent(\"game_scene\");\r\n        this.game_rules_js = cc.find(\"UI_ROOT\").getComponent(\"game_rules\");\r\n        this.sound_control = cc.find(\"sound_control\").getComponent(\"sound_control\");\r\n        this.have_icon_node.active = false;\r\n        this.button_tips_node.active = false;\r\n        this.update_content();\r\n        // this.update_schedule();\r\n    },\r\n    //刷新数据\r\n    update_content() {\r\n        var callback = function(){\r\n            var gold = user_data.user_data.gold;\r\n            var level = user_data.user_data.level;\r\n            switch (this.type) {\r\n                case \"land\":\r\n                    this.name_label.string = config.land[this.index].name;\r\n                    this.icon_sprite.spriteFrame = this.land_frame;\r\n                    if (user_data.user_data.land[this.index].have == 1) {\r\n                        this.button_tips_node.active = false;\r\n                        this.cost_label.node.active = false;\r\n                        this.have_icon_node.active = true;\r\n                        this.need_level_label.node.active = false;\r\n                        this.gold_icon_node.active = false;\r\n                    } else {\r\n                        this.need_level_label.node.active = true;\r\n                        this.gold_icon_node.active = true;\r\n                        this.need_level_label.string = \"Level \" + config.land[this.index].need_level + \" to unlock\";\r\n\r\n                        if (level >= config.land[this.index].need_level) {\r\n                            this.cost_label.string = config.land[this.index].cost;\r\n                            this.need_level_label.string = \"\";\r\n                        } else {\r\n                            this.cost_label.string = \"???\";\r\n                        };\r\n\r\n                        //可以购买给与提示\r\n                        if (level >= config.land[this.index].need_level && gold >= config.land[this.index].cost) {\r\n                            this.button_tips_node.active = true;\r\n                        } else {\r\n                            this.button_tips_node.active = false;\r\n                        };\r\n                    };\r\n                    break;\r\n                case \"plant\":\r\n                    this.name_label.string = config.plant[this.index].name;\r\n                    this.icon_sprite.spriteFrame = this.plant_icon_frame_arr[this.index];\r\n                    if (user_data.user_data.plant[this.index].have == 1) {\r\n                        this.button_tips_node.active = false;\r\n                        this.cost_label.node.active = false;\r\n                        this.have_icon_node.active = true;\r\n                        this.need_level_label.node.active = false;\r\n                        this.gold_icon_node.active = false;\r\n                    } else {\r\n                        this.gold_icon_node.active = true;\r\n                        this.need_level_label.node.active = true;\r\n                        this.need_level_label.string = \"Need \" + config.plant[this.index].need_level + \" level unlock\";\r\n\r\n                        //等级满足显示金币消耗\r\n                        if (level >= config.plant[this.index].need_level) {\r\n                            this.cost_label.string = config.plant[this.index].cost;\r\n                            this.need_level_label.string = \"\";\r\n                        } else {\r\n                            this.cost_label.string = \"???\";\r\n                        };\r\n\r\n                        //可以购买给与提示\r\n                        if (level >= config.plant[this.index].need_level && gold >= config.plant[this.index].cost) {\r\n                            this.button_tips_node.active = true;\r\n                        } else {\r\n                            this.button_tips_node.active = false;\r\n                        }\r\n                    };\r\n                    break;\r\n            };\r\n        };\r\n        this.schedule(callback, 0.1);\r\n    },\r\n    on_button_click() {\r\n        this.sound_control.play_sound_effect(\"button_click\");\r\n        this.game_scene_js.create_shop_buy_ui(this.type, this.index, this.icon_sprite.spriteFrame);\r\n    },\r\n    // onLoad () {},\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}