{"version":3,"sources":["assets\\script\\ui\\shop_content.js"],"names":["cc","Class","Component","properties","name_label","Label","cost_label","need_level_label","gold_icon_node","Node","plant_icon_frame_arr","SpriteFrame","land_frame","icon_sprite","Sprite","have_icon_node","button_tips_node","ini_node","type","index","game_scene_js","find","getComponent","game_rules_js","sound_control","active","update_content","update_schedule","schedule","gold","user_data","level","string","config","land","name","spriteFrame","have","node","need_level","cost","plant","on_button_click","play_sound_effect","create_shop_buy_ui","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["import user_data from \"user_data\";\nimport config from \"config\";\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        name_label: cc.Label,\n        cost_label: cc.Label,\n        need_level_label: cc.Label,\n        gold_icon_node: cc.Node,\n        plant_icon_frame_arr: [cc.SpriteFrame],\n        land_frame: cc.SpriteFrame,\n        icon_sprite: cc.Sprite,\n        have_icon_node: cc.Node,\n        button_tips_node: cc.Node,\n    },\n    //初始化\n    ini_node(type, index) {\n        this.index = index;\n        this.type = type;\n        this.game_scene_js = cc.find(\"UI_ROOT\").getComponent(\"game_scene\");\n        this.game_rules_js = cc.find(\"UI_ROOT\").getComponent(\"game_rules\");\n        this.sound_control = cc.find(\"sound_control\").getComponent(\"sound_control\");\n        this.have_icon_node.active = false;\n        this.button_tips_node.active = false;\n        this.update_content();\n        this.update_schedule();\n    },\n    update_schedule() {\n        this.schedule(this.update_content, 0.5);\n    },\n    //刷新数据\n    update_content() {\n        var gold = user_data.user_data.gold;\n        var level = user_data.user_data.level;\n        switch (this.type) {\n            case \"land\":\n                this.name_label.string = config.land[this.index].name;\n                this.icon_sprite.spriteFrame = this.land_frame;\n                if (user_data.user_data.land[this.index].have == 1) {\n                    this.button_tips_node.active = false;\n                    this.cost_label.node.active = false;\n                    this.have_icon_node.active = true;\n                    this.need_level_label.node.active = false;\n                    this.gold_icon_node.active = false;\n                } else {\n                    this.need_level_label.node.active = true;\n                    this.gold_icon_node.active = true;\n                    this.need_level_label.string = \"Level \" + config.land[this.index].need_level + \" to unlock\";\n\n                    if (level >= config.land[this.index].need_level) {\n                        this.cost_label.string = config.land[this.index].cost;\n                    } else {\n                        this.cost_label.string = \"???\";\n                    };\n\n                    //可以购买给与提示\n                    if (level >= config.land[this.index].need_level && gold >= config.land[this.index].cost) {\n                        this.button_tips_node.active = true;\n                    } else {\n                        this.button_tips_node.active = false;\n                    };\n                };\n                break;\n            case \"plant\":\n                this.name_label.string = config.plant[this.index].name;\n                this.icon_sprite.spriteFrame = this.plant_icon_frame_arr[this.index];\n                if (user_data.user_data.plant[this.index].have == 1) {\n                    this.button_tips_node.active = false;\n                    this.cost_label.node.active = false;\n                    this.have_icon_node.active = true;\n                    this.need_level_label.node.active = false;\n                    this.gold_icon_node.active = false;\n                } else {\n                    this.gold_icon_node.active = true;\n                    this.need_level_label.node.active = true;\n                    this.need_level_label.string = \"Need \" + config.plant[this.index].need_level + \" level unlock\";\n\n                    //等级满足显示金币消耗\n                    if (level >= config.plant[this.index].need_level) {\n                        this.cost_label.string = config.plant[this.index].cost;\n                    } else {\n                        this.cost_label.string = \"???\";\n                    };\n\n                    //可以购买给与提示\n                    if (level >= config.plant[this.index].need_level && gold >= config.plant[this.index].cost) {\n                        this.button_tips_node.active = true;\n                    } else {\n                        this.button_tips_node.active = false;\n                    }\n                };\n                break;\n        };\n    },\n    on_button_click() {\n        this.sound_control.play_sound_effect(\"button_click\");\n        this.game_scene_js.create_shop_buy_ui(this.type, this.index, this.icon_sprite.spriteFrame);\n    },\n    // onLoad () {},\n\n    start() {\n\n    },\n\n    // update (dt) {},\n});\n"]}