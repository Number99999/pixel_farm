{"version":3,"sources":["assets\\script\\AdsManager.js"],"names":["cc","Class","Component","properties","bannerUnitId","showFullUnitId","videoUnitId","bannerOnStart","banner","showFull","video","rewardVideoCallback","isTest","onLoad","sys","platform","IPHONE","ANDROID","IPAD","tradplus","tradPlusService","setEnableLog","initSdk","log","setNeedTestDevice","getBanner","getInterstitial","getRewardedVideo","setAdListener","onAdLoaded","adSourceName","onAdClicked","onAdLoadFailed","adError","onAdImpression","onAdShowFailed","onAdClosed","onBannerRefreshed","onAdAllLoaded","onAdFailed","loadInterstitial","onAdPlayFailed","onOneLayerLoadFailed","onOneLayerLoaded","loadAd","onAdNotReward","onAdReward","currencyName","amount","console","loadVideo","showRewardedVideo","callback","ready","showAd","showBanner","showInterstitial","isHasVideo","isHasInterstitial"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        bannerUnitId: \"\",\n        showFullUnitId: \"\",\n        videoUnitId: \"\",\n        bannerOnStart: false,\n        banner: null,\n        showFull: null,\n        video: null,\n        rewardVideoCallback: null,\n        isTest: false,\n        //bannerLoaded: false,\n    },\n\n    onLoad() {\n        if (cc.sys.platform === cc.sys.IPHONE || cc.sys.platform === cc.sys.ANDROID || cc.sys.platform === cc.sys.IPAD) {\n            // Enable debug log, this is for testing only, please comment it out before publish.\n            tradplus.tradPlusService.setEnableLog(true);\n            // Initialize the SDK.\n            tradplus.tradPlusService.initSdk();\n            cc.log(\"====25====\");\n            // Enable test mode, this is for testing only, please comment it out before publish.\n            tradplus.tradPlusService.setNeedTestDevice(true);\n            // Enable debug log, this is for testing only, please comment it out before publish.\n            tradplus.tradPlusService.setEnableLog(true);\n\n            if (this.bannerOnStart) {\n                this.banner = tradplus.tradPlusService.getBanner(this.bannerUnitId);\n            }\n\n            this.showFull = tradplus.tradPlusService.getInterstitial(this.showFullUnitId);\n            this.video = tradplus.tradPlusService.getRewardedVideo(this.videoUnitId);\n\n            if (this.bannerOnStart) {\n                this.banner.setAdListener({\n                    onAdLoaded: (adSourceName) => {\n                        // Triggered on Ad loaded, adSourceName is the name of Ad source platform.\n                        //this.bannerLoaded = true;\n                        cc.log(\"banner loaded\");\n                    },\n\n                    onAdClicked: () => {\n                        // Triggered on Ad clicked.\n                    },\n\n                    onAdLoadFailed: (adError) => {\n                        // Triggered on Ad load failed, adError contains error information.\n                        cc.log(\"AdLoadFailed: \" + adError);\n                    },\n\n                    onAdImpression: () => {\n                        // Triggered on Ad shown.\n                    },\n\n                    onAdShowFailed: (adError) => {\n                        // Triggered on Ad show failed, adError contains error information.\n                        // NOTE: This callback will only triggered on Android.\n                        cc.log(\"AdShowFailed\" + adError);\n                    },\n\n                    onAdClosed: () => {\n                        // Triggered on Ad closed.\n                        // NOTE: This callback will only triggered on Android.\n                    },\n\n                    onBannerRefreshed: () => {\n                        // Triggered on Ad refreshed.\n                        // NOTE: This callback will only triggered on Android.\n                    },\n                });\n            }\n            this.showFull.setAdListener({\n                onAdAllLoaded: (adSourceName) => {\n                    // Triggered on Ad loaded, adSourceName is the name of Ad source platform.\n                },\n\n                onAdLoaded: (adSourceName) => {\n                    // Triggered on Ad loaded, adSourceName is the name of Ad source platform.\n                },\n\n                onAdClicked: () => {\n                    // Triggered on Ad clicked.\n                },\n\n                onAdFailed: (adError) => {\n                    // Triggered on Ad load failed, adError contains error information.\n                },\n\n                onAdImpression: () => {\n                    // Triggered on Ad shown.\n                },\n\n                onAdShowFailed: (adError) => {\n                    // Triggered on Ad show failed, adError contains error information.\n                    // NOTE: This callback will only triggered on Android.\n                },\n\n                onAdClosed: () => {\n                    // Triggered on Ad closed.\n                    // NOTE: This callback will only triggered on Android.\n                    this.loadInterstitial();\n                },\n\n                onAdPlayFailed: (adError) => {\n                    // Triggered on Ad load failed, adError contains error information.\n                },\n\n                onOneLayerLoadFailed: (adSourceName, adError) => {\n                    // Triggered on Ad load failed, adError contains error information.\n                },\n\n                onOneLayerLoaded: (adSourceName) => {\n                    // Triggered on Ad loaded, adSourceName is the name of Ad source platform.\n                },\n            });\n\n            this.video.setAdListener({\n                onAdAllLoaded: (adSourceName) => {\n                    // Triggered on Ad loaded, adSourceName is the name of Ad source platform.\n                },\n\n                onAdLoaded: (adSourceName) => {\n                    // Triggered on Ad loaded, adSourceName is the name of Ad source platform.\n                },\n\n                onAdClicked: () => {\n                    // Triggered on Ad clicked.\n                },\n\n                onAdFailed: (adError) => {\n                    // Triggered on Ad load failed, adError contains error information.\n                    cc.log(\"onAdFailed: \" + adError);\n                },\n\n                onAdImpression: () => {\n                    // Triggered on Ad shown.\n                },\n\n                onAdClosed: () => {\n                    // Triggered on Ad closed.\n                    // NOTE: This callback will only triggered on Android.\n                    this.video.loadAd();\n                },\n\n                onAdPlayFailed: (adError) => {\n                    // Triggered on Ad shown, adSourceName is the name of Ad source platform\n                    cc.log(\"onAdPlayFailed: \" + adError);\n                },\n\n                onOneLayerLoadFailed: (adSourceName, adError) => {\n                    // Triggered on Ad load failed, adError contains error information.\n                    cc.log(\"onOneLayerLoadFailed: \" + adError);\n                },\n\n                onOneLayerLoaded: (adSourceName) => {\n                    // Triggered on Ad loaded, adSourceName is the name of Ad source platform.\n                },\n\n                onAdNotReward: () => {\n\n                },\n\n                onAdReward: (currencyName, amount) => {\n                    console.log(\"ads: ====173====\");\n                    if (this.rewardVideoCallback != null) {\n                        console.log(\"ads: ====175====\");\n                        this.rewardVideoCallback();\n                    }\n                },\n            });\n            this.loadVideo();\n            this.loadInterstitial();\n        }\n    },\n\n    loadInterstitial() {\n        this.showFull.loadAd();\n    },\n\n    loadVideo() {\n        this.video.loadAd();\n    },\n\n    showRewardedVideo(callback) {\n        cc.log(this.isTest);\n        if (this.isTest) {\n            callback();\n        }\n        else {\n            if (cc.sys.platform === cc.sys.IPHONE || cc.sys.platform === cc.sys.ANDROID || cc.sys.platform === cc.sys.IPAD) {\n                if (this.video != null && this.video.ready) {\n                    this.rewardVideoCallback = callback;\n                    this.video.showAd();\n                }\n            }\n        }\n    },\n\n    showBanner() {\n        if (cc.sys.platform === cc.sys.IPHONE || cc.sys.platform === cc.sys.ANDROID || cc.sys.platform === cc.sys.IPAD) {\n            if (this.banner != null) {\n                this.banner.loadAd('bottom');\n            }\n        }\n    },\n\n    showInterstitial() {\n        if (cc.sys.platform === cc.sys.IPHONE || cc.sys.platform === cc.sys.ANDROID || cc.sys.platform === cc.sys.IPAD) {\n            if (this.showFull != null && this.showFull.ready) {\n                this.showFull.showAd();\n            }\n        }\n    },\n\n    isHasVideo() {\n        if (this.isTest)\n            return true\n        if (cc.sys.platform === cc.sys.IPHONE || cc.sys.platform === cc.sys.ANDROID || cc.sys.platform === cc.sys.IPAD)\n            return this.video.ready;\n        return false;\n    },\n\n    isHasInterstitial() {\n        if (this.isTest)\n            return true\n        if (cc.sys.platform === cc.sys.IPHONE || cc.sys.platform === cc.sys.ANDROID || cc.sys.platform === cc.sys.IPAD)\n            return this.showFull.ready;\n        return false;\n    },\n});\n"]}