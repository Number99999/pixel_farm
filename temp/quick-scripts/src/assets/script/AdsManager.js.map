{"version":3,"sources":["assets\\script\\AdsManager.js"],"names":["cc","Class","Component","properties","bannerUnitId","showFullUnitId","videoUnitId","bannerOnStart","banner","showFull","video","rewardVideoCallback","isTest","onLoad","sys","platform","IPHONE","ANDROID","IPAD","tradplus","tradPlusService","setEnableLog","initSdk","log","setNeedTestDevice","getBanner","getInterstitial","getRewardedVideo","setAdListener","onAdLoaded","adSourceName","onAdClicked","onAdLoadFailed","adError","onAdImpression","onAdShowFailed","onAdClosed","onBannerRefreshed","onAdAllLoaded","onAdFailed","loadInterstitial","onAdPlayFailed","onOneLayerLoadFailed","onOneLayerLoaded","loadAd","onAdNotReward","onAdReward","currencyName","amount","loadVideo","showRewardedVideo","callback","ready","showAd","showBanner","showInterstitial","isHasVideo","isHasInterstitial"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        bannerUnitId: \"\",\r\n        showFullUnitId: \"\",\r\n        videoUnitId: \"\",\r\n        bannerOnStart: false,\r\n        banner: null,\r\n        showFull: null,\r\n        video: null,\r\n        rewardVideoCallback: null,\r\n        isTest: false,\r\n        //bannerLoaded: false,\r\n    },\r\n\r\n    onLoad() {\r\n        if (cc.sys.platform === cc.sys.IPHONE || cc.sys.platform === cc.sys.ANDROID || cc.sys.platform === cc.sys.IPAD) {\r\n            // Enable debug log, this is for testing only, please comment it out before publish.\r\n            tradplus.tradPlusService.setEnableLog(true);\r\n            // Initialize the SDK.\r\n            tradplus.tradPlusService.initSdk();\r\n            cc.log(\"====25====\");\r\n            // Enable test mode, this is for testing only, please comment it out before publish.\r\n            tradplus.tradPlusService.setNeedTestDevice(true);\r\n            // Enable debug log, this is for testing only, please comment it out before publish.\r\n            tradplus.tradPlusService.setEnableLog(true);\r\n\r\n            if (this.bannerOnStart) {\r\n                this.banner = tradplus.tradPlusService.getBanner(this.bannerUnitId);\r\n            }\r\n\r\n            this.showFull = tradplus.tradPlusService.getInterstitial(this.showFullUnitId);\r\n            this.video = tradplus.tradPlusService.getRewardedVideo(this.videoUnitId);\r\n\r\n            if (this.bannerOnStart) {\r\n                this.banner.setAdListener({\r\n                    onAdLoaded: (adSourceName) => {\r\n                        // Triggered on Ad loaded, adSourceName is the name of Ad source platform.\r\n                        //this.bannerLoaded = true;\r\n                        cc.log(\"banner loaded\");\r\n                    },\r\n\r\n                    onAdClicked: () => {\r\n                        // Triggered on Ad clicked.\r\n                    },\r\n\r\n                    onAdLoadFailed: (adError) => {\r\n                        // Triggered on Ad load failed, adError contains error information.\r\n                        cc.log(\"AdLoadFailed: \" + adError);\r\n                    },\r\n\r\n                    onAdImpression: () => {\r\n                        // Triggered on Ad shown.\r\n                    },\r\n\r\n                    onAdShowFailed: (adError) => {\r\n                        // Triggered on Ad show failed, adError contains error information.\r\n                        // NOTE: This callback will only triggered on Android.\r\n                        cc.log(\"AdShowFailed\" + adError);\r\n                    },\r\n\r\n                    onAdClosed: () => {\r\n                        // Triggered on Ad closed.\r\n                        // NOTE: This callback will only triggered on Android.\r\n                    },\r\n\r\n                    onBannerRefreshed: () => {\r\n                        // Triggered on Ad refreshed.\r\n                        // NOTE: This callback will only triggered on Android.\r\n                    },\r\n                });\r\n            }\r\n            this.showFull.setAdListener({\r\n                onAdAllLoaded: (adSourceName) => {\r\n                    // Triggered on Ad loaded, adSourceName is the name of Ad source platform.\r\n                },\r\n\r\n                onAdLoaded: (adSourceName) => {\r\n                    // Triggered on Ad loaded, adSourceName is the name of Ad source platform.\r\n                },\r\n\r\n                onAdClicked: () => {\r\n                    // Triggered on Ad clicked.\r\n                },\r\n\r\n                onAdFailed: (adError) => {\r\n                    // Triggered on Ad load failed, adError contains error information.\r\n                },\r\n\r\n                onAdImpression: () => {\r\n                    // Triggered on Ad shown.\r\n                },\r\n\r\n                onAdShowFailed: (adError) => {\r\n                    // Triggered on Ad show failed, adError contains error information.\r\n                    // NOTE: This callback will only triggered on Android.\r\n                },\r\n\r\n                onAdClosed: () => {\r\n                    // Triggered on Ad closed.\r\n                    // NOTE: This callback will only triggered on Android.\r\n                    this.loadInterstitial();\r\n                },\r\n\r\n                onAdPlayFailed: (adError) => {\r\n                    // Triggered on Ad load failed, adError contains error information.\r\n                },\r\n\r\n                onOneLayerLoadFailed: (adSourceName, adError) => {\r\n                    // Triggered on Ad load failed, adError contains error information.\r\n                },\r\n\r\n                onOneLayerLoaded: (adSourceName) => {\r\n                    // Triggered on Ad loaded, adSourceName is the name of Ad source platform.\r\n                },\r\n            });\r\n\r\n            this.video.setAdListener({\r\n                onAdAllLoaded: (adSourceName) => {\r\n                    // Triggered on Ad loaded, adSourceName is the name of Ad source platform.\r\n                },\r\n\r\n                onAdLoaded: (adSourceName) => {\r\n                    // Triggered on Ad loaded, adSourceName is the name of Ad source platform.\r\n                },\r\n\r\n                onAdClicked: () => {\r\n                    // Triggered on Ad clicked.\r\n                },\r\n\r\n                onAdFailed: (adError) => {\r\n                    // Triggered on Ad load failed, adError contains error information.\r\n                    cc.log(\"onAdFailed: \" + adError);\r\n                },\r\n\r\n                onAdImpression: () => {\r\n                    // Triggered on Ad shown.\r\n                },\r\n\r\n                onAdClosed: () => {\r\n                    // Triggered on Ad closed.\r\n                    // NOTE: This callback will only triggered on Android.\r\n                    this.video.loadAd();\r\n                },\r\n\r\n                onAdPlayFailed: (adError) => {\r\n                    // Triggered on Ad shown, adSourceName is the name of Ad source platform\r\n                    cc.log(\"onAdPlayFailed: \" + adError);\r\n                },\r\n\r\n                onOneLayerLoadFailed: (adSourceName, adError) => {\r\n                    // Triggered on Ad load failed, adError contains error information.\r\n                    cc.log(\"onOneLayerLoadFailed: \" + adError);\r\n                },\r\n\r\n                onOneLayerLoaded: (adSourceName) => {\r\n                    // Triggered on Ad loaded, adSourceName is the name of Ad source platform.\r\n                },\r\n\r\n                onAdNotReward: () => {\r\n\r\n                },\r\n\r\n                onAdReward: (currencyName, amount) => {\r\n                    if (this.rewardVideoCallback != null) {\r\n                        this.rewardVideoCallback();\r\n                    }\r\n                },\r\n            });\r\n            this.loadVideo();\r\n            this.loadInterstitial();\r\n        }\r\n    },\r\n\r\n    loadInterstitial() {\r\n        this.showFull.loadAd();\r\n    },\r\n\r\n    loadVideo() {\r\n        this.video.loadAd();\r\n    },\r\n\r\n    showRewardedVideo(callback) {\r\n        cc.log(this.isTest);\r\n        if (this.isTest) {\r\n            callback();\r\n        }\r\n        else {\r\n            if (cc.sys.platform === cc.sys.IPHONE || cc.sys.platform === cc.sys.ANDROID || cc.sys.platform === cc.sys.IPAD) {\r\n                if (this.video != null && this.video.ready) {\r\n                    this.rewardVideoCallback = callback;\r\n                    this.video.showAd();\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    showBanner() {\r\n        if (cc.sys.platform === cc.sys.IPHONE || cc.sys.platform === cc.sys.ANDROID || cc.sys.platform === cc.sys.IPAD) {\r\n            if (this.banner != null) {\r\n                this.banner.loadAd('bottom');\r\n            }\r\n        }\r\n    },\r\n\r\n    showInterstitial() {\r\n        if (cc.sys.platform === cc.sys.IPHONE || cc.sys.platform === cc.sys.ANDROID || cc.sys.platform === cc.sys.IPAD) {\r\n            if (this.showFull != null && this.showFull.ready) {\r\n                this.showFull.showAd();\r\n            }\r\n        }\r\n    },\r\n\r\n    isHasVideo() {\r\n        if (this.isTest)\r\n            return true\r\n        if (cc.sys.platform === cc.sys.IPHONE || cc.sys.platform === cc.sys.ANDROID || cc.sys.platform === cc.sys.IPAD)\r\n            return this.video.ready;\r\n        return false;\r\n    },\r\n\r\n    isHasInterstitial() {\r\n        if (this.isTest)\r\n            return true\r\n        if (cc.sys.platform === cc.sys.IPHONE || cc.sys.platform === cc.sys.ANDROID || cc.sys.platform === cc.sys.IPAD)\r\n            return this.showFull.ready;\r\n        return false;\r\n    },\r\n});\r\n"]}