{"version":3,"sources":["assets\\script\\game_rules.js"],"names":["user_data","require","config","push","cc","Class","Component","properties","land_prefab","Prefab","land_group_node","Node","center_node","gold_label","Label","ex_label","level_label","diamond_label","gold_progress_node","ProgressBar","ex_progress_node","player_prefab","staff_prefab_arr","wareHouse_node","main_camera","tips_group_node","button_group_node","hotel_produce_node","videotape_button","videotape_button_arr","SpriteFrame","on_watering_button_click","sound_control","play_sound_effect","node","game_scene_js","create_button_group","zIndex","getComponent","ini_node","on_till_button_click","on_study_button_click","create_study_ui","on_home_button_click","create_option_ui","on_pet_button_click","create_pet_ui","on_hotel_button_click","create_hotel_ui","on_staff_button_click","create_staff_ui","create_land","arr","Object","keys","land","i","length","instantiate","parent","create_player","create_staff","staff_index","staff","have","children","add_gold","num","add_gold_anim","timeCount","gold","gold_max","skill","callback","Pnum","parseInt","string","create_tips_ui","unschedule","set_gold_progress","schedule","add_diamond","diamond","add_ex","add_ex_anim","ex","now_ex","next_ex","level","skill_point","set_ex_progress","tween","to","progress","start","on_wareHouse_click","create_sell_ui","wareHouse_full","wareHouse_shcedule","wareHouse","all_capacity","wareHouse_level","count","getChildByName","active","on_orchard_button_click","auto_save","fx","save","macro","REPEAT_FOREVER","updata_land","land_index","save_login_time","login_time","Date","getTime","offline_profit_ui","now_time","min","Math","floor","create_offline_profit_ui","on_shop_button_click","create_shop_ui","create_novice","novice","create_novice_ui","create_button_tips","position","study_ui_tips","staff_ui_tips","shop_ui_tips","shop_ui_callback","land_arr","plant_arr","plant","cost","need_level","j","stduy_tips_callback","staff_tips_callback","create_pet","pet","create_pet_a","index","on_get_hotel_produce_click","e","target","create_gold_effect","hotel_cache_gold","update_hotel_produce","label","hotel_buy_room","room_index","hotel_0","hotel_1","hotel_2","hotel_3","ini_hotel_produce","hotel","hotel_0_schedule","produce_time","produce","hotel_1_schedule","hotel_2_schedule","hotel_3_schedule","judge_date","now_date","getDate","save_date","share_count","undefined","ini_videotape","videotape_path","videotape_start_time","videotape_state","on_videotape_button_click","create_videotape_ui","videotape_time","stop_videotape","start_videotape","wx","videotape_timeControl","Sprite","spriteFrame","recorder","getGameRecorderManager","onStart","res","duration","onStop","videoPath","stop","time_count","load","manager","director","getCollisionManager","enabled","play_bg_sound","on_test_button_click","custom","onLoad","find"],"mappings":"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","sourceRoot":"/","sourcesContent":["var user_data = require(\"user_data\");\r\nvar config = require(\"config\");\r\nvar push = require(\"push\");\r\nimport fx from \"fx\";\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        land_prefab: cc.Prefab,\r\n        land_group_node: cc.Node,\r\n        center_node: cc.Node,\r\n        gold_label: cc.Label,\r\n        ex_label: cc.Label,\r\n        level_label: cc.Label,\r\n        diamond_label: cc.Label,\r\n        gold_progress_node: cc.ProgressBar,\r\n        ex_progress_node: cc.ProgressBar,\r\n        player_prefab: cc.Prefab,\r\n        staff_prefab_arr: [cc.Prefab],\r\n        wareHouse_node: cc.Node,\r\n        main_camera: cc.Node,\r\n        tips_group_node: cc.Node,\r\n        button_group_node: cc.Node,\r\n        hotel_produce_node: cc.Node,\r\n        videotape_button: cc.Node,\r\n        videotape_button_arr: [cc.SpriteFrame],\r\n    },\r\n\r\n\r\n    //浇水按钮被点击\r\n    on_watering_button_click: function () {\r\n        this.sound_control.play_sound_effect(\"main_button_click\");\r\n        var node = this.game_scene_js.create_button_group(this.center_node);\r\n        node.zIndex = 3;\r\n        if (node != null) {\r\n            node.getComponent(\"button_more\").ini_node(\"watering\");\r\n        };\r\n    },\r\n    //耕地按钮被点击\r\n    on_till_button_click: function () {\r\n        this.sound_control.play_sound_effect(\"main_button_click\");\r\n        var node = this.game_scene_js.create_button_group(this.center_node);\r\n        node.zIndex = 3;\r\n        if (node != null) {\r\n            node.getComponent(\"button_more\").ini_node(\"till\");\r\n        };\r\n    },\r\n    //学习按钮被点击\r\n    on_study_button_click: function () {\r\n        this.sound_control.play_sound_effect(\"main_button_click\");\r\n        var node = this.game_scene_js.create_study_ui(this.node);\r\n        if (node != null) {\r\n            node.getComponent(\"study_ui\").ini_node();\r\n        };\r\n    },\r\n    //home 被点击时\r\n    on_home_button_click() {\r\n        this.sound_control.play_sound_effect(\"button_click\");\r\n        this.game_scene_js.create_option_ui();\r\n    },\r\n    //宠物按钮被点击\r\n    on_pet_button_click: function () {\r\n        // this.sound_control.play_sound_effect(\"main_button_click\");\r\n        var node = this.game_scene_js.create_pet_ui(this.node);\r\n        if (node != null) {\r\n            node.getComponent(\"pet_ui\").ini_node();\r\n        };\r\n    },\r\n    //旅馆按钮被点击\r\n    on_hotel_button_click() {\r\n        this.sound_control.play_sound_effect(\"button_click\");\r\n        this.game_scene_js.create_hotel_ui();\r\n    },\r\n    //雇佣员工\r\n    on_staff_button_click: function () {\r\n        this.sound_control.play_sound_effect(\"main_button_click\");\r\n        var node = this.game_scene_js.create_staff_ui(this.node);\r\n        if (node != null) {\r\n            node.getComponent(\"staff_ui\").ini_node();\r\n        };\r\n    },\r\n    //生成土地\r\n    create_land: function () {\r\n        var arr = Object.keys(user_data.user_data.land);\r\n        for (var i = 0; i < arr.length; i++) {\r\n            var node = cc.instantiate(this.land_prefab);\r\n            node.parent = this.land_group_node;\r\n            node.getComponent(\"land\").ini_node(i);\r\n        };\r\n    },\r\n    //创建玩家小人\r\n    create_player: function () {\r\n        var node = cc.instantiate(this.player_prefab);\r\n        node.parent = this.center_node;\r\n    },\r\n    //创建佣人\r\n    create_staff: function (staff_index) {\r\n        if (staff_index == null) {\r\n            var arr = Object.keys(user_data.user_data.staff);\r\n            for (var i = 0; i < arr.length; i++) {\r\n                if (user_data.user_data.staff[i].have == 1) {\r\n                    var node = cc.instantiate(this.staff_prefab_arr[i]);\r\n                    node.parent = this.land_group_node.children[i];\r\n                    node.getComponent(\"staff_ai\").ini_node(i);\r\n                } else {\r\n                    return;\r\n                };\r\n            };\r\n        } else {\r\n            var node = cc.instantiate(this.staff_prefab_arr[staff_index]);\r\n            node.parent = this.land_group_node.children[staff_index];\r\n            node.getComponent(\"staff_ai\").ini_node(staff_index);\r\n        };\r\n\r\n    },\r\n    //刷新金币数\r\n    add_gold: function (num) {\r\n        if (this.add_gold_anim == 0) {\r\n            this.add_gold_anim = 1;\r\n            var timeCount = 10;\r\n            var gold = user_data.user_data.gold;\r\n            var gold_max = 500 * user_data.user_data.skill[\"gold_max\"] + 500;\r\n            var callback = function () {\r\n                var Pnum = parseInt(num / timeCount)\r\n                timeCount--;\r\n                this.gold_label.string = gold + Pnum + \"/\" + gold_max;\r\n                if (timeCount <= 0) {\r\n                    user_data.user_data.gold += num;\r\n                    if (user_data.user_data.gold < 0) {\r\n                        user_data.user_data.gold = 0;\r\n                    }\r\n                    if (user_data.user_data.gold > gold_max) {\r\n                        this.sound_control.play_sound_effect(\"un_click\");\r\n                        this.game_scene_js.create_tips_ui(this.node, \"gold_full\");\r\n                        user_data.user_data.gold = gold_max;\r\n                    }\r\n                    this.gold_label.string = user_data.user_data.gold + \"/\" + gold_max;\r\n                    this.unschedule(callback);\r\n                    this.set_gold_progress();\r\n                    this.add_gold_anim = 0;\r\n                };\r\n            };\r\n            this.schedule(callback, 0.03);\r\n        } else {\r\n            user_data.user_data.gold += num;\r\n        };\r\n    },\r\n\r\n    add_diamond: function (num) {\r\n        user_data.user_data.diamond += num;\r\n    },\r\n    //刷新ex数\r\n    add_ex: function (num) {\r\n        if (this.add_ex_anim == 0) {\r\n            this.add_ex_anim = 1;\r\n            var timeCount = 10;\r\n            var ex = user_data.user_data.now_ex;\r\n            var next_ex = 2 * user_data.user_data.level;\r\n            var callback = function () {\r\n                var Pnum = parseInt(num / timeCount)\r\n                timeCount--;\r\n                this.ex_label.string = ex + Pnum + \"/\" + next_ex;\r\n                if (timeCount <= 0) {\r\n                    user_data.user_data.now_ex += num;\r\n                    if (user_data.user_data.now_ex > next_ex) {\r\n                        user_data.user_data.now_ex = 0;\r\n                        user_data.user_data.level++;\r\n                        user_data.user_data.skill_point++;\r\n                        this.game_scene_js.create_tips_ui(this.game_scene_js.node, \"gift_ad_level\");    // show notic level up\r\n                    }\r\n                    this.unschedule(callback);\r\n                    this.set_ex_progress();\r\n                    this.add_ex_anim = 0;\r\n                };\r\n            };\r\n            this.schedule(callback, 0.05);\r\n        } else {\r\n            user_data.user_data.now_ex += num;\r\n        };\r\n\r\n    },\r\n    set_gold_progress: function () {\r\n        var gold = user_data.user_data.gold;\r\n        var gold_max = 500 * user_data.user_data.skill[\"gold_max\"] + 500;\r\n        this.gold_label.string = gold + \"/\" + gold_max;\r\n        cc.tween(this.gold_progress_node)\r\n            .to(0.3, { progress: gold / gold_max })\r\n            .start();\r\n    },\r\n    set_ex_progress: function () {\r\n        var now_ex = user_data.user_data.now_ex;\r\n        var next_ex = 2 * user_data.user_data.level;\r\n        this.level_label.string = user_data.user_data.level;\r\n        this.ex_label.string = now_ex + \"/\" + next_ex;\r\n        cc.tween(this.ex_progress_node)\r\n            .to(0.3, { progress: now_ex / next_ex })\r\n            .start();\r\n    },\r\n    //仓库被点击\r\n    on_wareHouse_click: function () {\r\n        this.sound_control.play_sound_effect(\"button_click\");\r\n        var node = this.game_scene_js.create_sell_ui(this.node);\r\n        if (node != null) {\r\n            node.getComponent(\"sell_ui\").ini_node();\r\n        };\r\n    },\r\n    //仓库已满\r\n    wareHouse_full: function () {\r\n        //\r\n        this.wareHouse_shcedule = function () {\r\n            var arr = Object.keys(user_data.user_data.wareHouse);\r\n            var all_capacity = user_data.user_data.wareHouse_level * config.wareHouse[\"all_capacity\"];\r\n            for (var i = 0; i < arr.length; i++) {\r\n                if (user_data.user_data.wareHouse[i].count >= all_capacity) {\r\n                    this.wareHouse_node.getChildByName(\"wareHouse_full\").active = true;\r\n                    return;\r\n                } else {\r\n                    this.wareHouse_node.getChildByName(\"wareHouse_full\").active = false;\r\n                };\r\n            };\r\n        };\r\n        this.schedule(this.wareHouse_shcedule, 0.1);\r\n    },\r\n    //果园被点击\r\n    on_orchard_button_click: function () {\r\n        // this.sound_control.play_bg_sound(\"village_bg\");\r\n        this.sound_control.play_sound_effect(\"un_click\");\r\n        this.game_scene_js.create_tips_ui(this.node, \"un_develop\");\r\n    },\r\n    //自动存档\r\n    auto_save: function () {\r\n        var callback = function () {\r\n            fx.save();\r\n        };\r\n        this.schedule(callback, 1, cc.macro.REPEAT_FOREVER);\r\n    },\r\n    //刷新土地\r\n    updata_land: function (land_index) {\r\n        //初始化土地状态\r\n        this.land_group_node.children[land_index].getComponent(\"land\").ini_node(land_index);\r\n    },\r\n    //记录上线时间\r\n    save_login_time: function () {\r\n        if (user_data.user_data.login_time == 0) {\r\n            user_data.user_data.login_time = new Date().getTime();\r\n        };\r\n    },\r\n    //创建离线收益ui\r\n    offline_profit_ui: function () {\r\n        var login_time = user_data.user_data.login_time;\r\n        var now_time = new Date().getTime();\r\n        var min = Math.floor((now_time - login_time) / (1000 * 60));\r\n        if (min >= 5) {\r\n            this.game_scene_js.create_offline_profit_ui(this.node);\r\n        } else {\r\n            return;\r\n        };\r\n    },\r\n    //互推按钮被点击\r\n    // on_push_button_click: function (e, name) {\r\n    //     if (typeof (wx) !== \"undefined\") {\r\n    //         wx.navigateToMiniProgram({\r\n    //             appId: push[name].appid,\r\n    //             path: '',\r\n    //             success(res) {\r\n    //                 // 打开成功\r\n    //             }\r\n    //         })\r\n    //     };\r\n    // },\r\n    //商店按钮被点击\r\n    on_shop_button_click() {\r\n        this.sound_control.play_sound_effect(\"button_click\");\r\n        this.game_scene_js.create_shop_ui();\r\n    },\r\n    //创建新手引导\r\n    create_novice() {\r\n        if (user_data.user_data.novice == 0) {\r\n            this.game_scene_js.create_novice_ui();\r\n            user_data.user_data.novice = 1;\r\n        };\r\n    },\r\n    //创建按钮提示\r\n    create_button_tips() {\r\n        for (var i = 0; i < this.button_group_node.children.length; i++) {\r\n            this.game_scene_js.create_button_tips(this.tips_group_node, this.button_group_node.children[i].position);\r\n        };\r\n        this.study_ui_tips();\r\n        this.staff_ui_tips();\r\n        this.shop_ui_tips();\r\n    },\r\n    //购买商品提示\r\n    shop_ui_tips() {\r\n        this.shop_ui_callback = function () {\r\n            var land_arr = Object.keys(user_data.user_data.land)\r\n            var plant_arr = Object.keys(user_data.user_data.plant)\r\n            var gold = user_data.user_data.gold;\r\n            var level = user_data.user_data.level;\r\n            for (var i = 0; i < land_arr.length; i++) {\r\n                if (gold >= config.land[i].cost && level >= config.land[i].need_level && user_data.user_data.land[i].have == 0) {\r\n                    this.tips_group_node.children[0].active = true;\r\n                    return;\r\n                } else {\r\n                    this.tips_group_node.children[0].active = false;\r\n                };\r\n            };\r\n            for (var j = 0; j < plant_arr.length; j++) {\r\n                if (gold >= config.plant[j].cost && level >= config.plant[j].need_level && user_data.user_data.plant[j].have == 0) {\r\n                    this.tips_group_node.children[0].active = true;\r\n                    return;\r\n                } else {\r\n                    this.tips_group_node.children[0].active = false;\r\n                };\r\n            };\r\n        };\r\n        this.schedule(this.shop_ui_callback, 1);\r\n    },\r\n    //加点提示\r\n    study_ui_tips() {\r\n        this.stduy_tips_callback = function () {\r\n            var skill_point = user_data.user_data.skill_point;\r\n            if (skill_point > 0) {\r\n                this.tips_group_node.children[1].active = true;\r\n            } else {\r\n                //技能点不足不提示\r\n                this.tips_group_node.children[1].active = false;\r\n            };\r\n        };\r\n        this.schedule(this.stduy_tips_callback, 1, cc.macro.REPEAT_FOREVER);\r\n    },\r\n    //雇佣工人提示\r\n    staff_ui_tips() {\r\n        this.staff_tips_callback = function () {\r\n            var arr = Object.keys(user_data.user_data.staff);\r\n            for (var i = 0; i < arr.length; i++) {\r\n                //拥有这块土地\r\n                if (user_data.user_data.land[i].have == 1 && user_data.user_data.gold >= config.staff[i].cost && user_data.user_data.staff[i].have == 0) {\r\n                    this.tips_group_node.children[3].active = true;\r\n                    return;\r\n                } else {\r\n                    this.tips_group_node.children[3].active = false;\r\n                };\r\n            };\r\n        };\r\n        this.schedule(this.staff_tips_callback, 1, cc.macro.REPEAT_FOREVER);\r\n    },\r\n    //创建宠物\r\n    create_pet() {\r\n        var arr = Object.keys(user_data.user_data.pet);\r\n        for (var i = 0; i < arr.length; i++) {\r\n            if (user_data.user_data.pet[i].have == 1) {\r\n                this.game_scene_js.create_pet(this.center_node, i);\r\n            } else {\r\n                //\r\n            };\r\n        };\r\n    },\r\n    //单个创建宠物\r\n    create_pet_a(index) {\r\n        this.game_scene_js.create_pet(this.center_node, index);\r\n    },\r\n\r\n    //=======================================================================================\r\n    //=======================================================================================\r\n\r\n    //领取收益\r\n    on_get_hotel_produce_click(e) {\r\n        var node = e.target;\r\n        for (var i = 0; i < 3; i++) {\r\n            this.game_scene_js.create_gold_effect(node, i, 0);\r\n        };\r\n        node.active = false;\r\n        this.add_gold(user_data.user_data.hotel_cache_gold);\r\n        user_data.user_data.hotel_cache_gold = 0;\r\n    },\r\n    //刷新旅馆收益\r\n    update_hotel_produce() {\r\n        //1s更新一次数据\r\n        var callback = function () {\r\n            var hotel_cache_gold = user_data.user_data.hotel_cache_gold;\r\n            if (hotel_cache_gold == 0) {\r\n                this.hotel_produce_node.active = false;\r\n            } else {\r\n                this.hotel_produce_node.active = true;\r\n            };\r\n            var label = this.hotel_produce_node.getChildByName(\"hotel_produce_label\").getComponent(cc.Label);\r\n            label.string = hotel_cache_gold;\r\n        };\r\n        this.schedule(callback, 1, cc.macro.REPEAT_FOREVER);\r\n    },\r\n    //购买一个房间\r\n    hotel_buy_room(room_index) {\r\n        switch (room_index) {\r\n            case 0:\r\n                this.hotel_0();\r\n                break;\r\n            case 1:\r\n                this.hotel_1();\r\n                break;\r\n            case 2:\r\n                this.hotel_2();\r\n                break;\r\n            case 3:\r\n                this.hotel_3();\r\n                break;\r\n        };\r\n    },\r\n    //初始化旅馆产出\r\n    ini_hotel_produce() {\r\n\r\n        //启动刷新收益\r\n        this.update_hotel_produce();\r\n\r\n        if (user_data.user_data.hotel[0].have == 1) {\r\n            this.hotel_0();\r\n        };\r\n        if (user_data.user_data.hotel[1].have == 1) {\r\n            this.hotel_1();\r\n        };\r\n        if (user_data.user_data.hotel[2].have == 1) {\r\n            this.hotel_2();\r\n        };\r\n        if (user_data.user_data.hotel[3].have == 1) {\r\n            this.hotel_3();\r\n        };\r\n\r\n    },\r\n    //hotel0 生成\r\n    hotel_0() {\r\n        var timeCount = 0;\r\n        this.hotel_0_schedule = function () {\r\n            timeCount++;\r\n            if (timeCount >= config.hotel[0].produce_time) {\r\n                user_data.user_data.hotel_cache_gold += config.hotel[0].produce;\r\n                timeCount = 0;\r\n            };\r\n        };\r\n        this.schedule(this.hotel_0_schedule, 1, cc.macro.REPEAT_FOREVER);\r\n    },\r\n    //hotel1 生成\r\n    hotel_1() {\r\n        var timeCount = 0;\r\n        this.hotel_1_schedule = function () {\r\n            timeCount++;\r\n            if (timeCount >= config.hotel[1].produce_time) {\r\n                user_data.user_data.hotel_cache_gold += config.hotel[1].produce;\r\n                timeCount = 0;\r\n            };\r\n        };\r\n        this.schedule(this.hotel_1_schedule, 1, cc.macro.REPEAT_FOREVER);\r\n    },\r\n    //hotel2 生成\r\n    hotel_2() {\r\n        var timeCount = 0;\r\n        this.hotel_2_schedule = function () {\r\n            timeCount++;\r\n            if (timeCount >= config.hotel[2].produce_time) {\r\n                user_data.user_data.hotel_cache_gold += config.hotel[2].produce;\r\n                timeCount = 0;\r\n            };\r\n        };\r\n        this.schedule(this.hotel_2_schedule, 1, cc.macro.REPEAT_FOREVER);\r\n    },\r\n    //hotel3 生成\r\n    hotel_3() {\r\n        var timeCount = 0;\r\n        this.hotel_3_schedule = function () {\r\n            timeCount++;\r\n            if (timeCount >= config.hotel[3].produce_time) {\r\n                user_data.user_data.hotel_cache_gold += config.hotel[3].produce;\r\n                timeCount = 0;\r\n            };\r\n        };\r\n        this.schedule(this.hotel_3_schedule, 1, cc.macro.REPEAT_FOREVER);\r\n    },\r\n    //=======================================================================================\r\n    //=======================================================================================\r\n    //判断当前日期\r\n    judge_date() {\r\n        var now_date = new Date().getDate();\r\n        var arr = Object.keys(user_data.user_data.pet);\r\n        if (user_data.user_data.save_date == 0) {\r\n            //新存档记录日期\r\n            user_data.user_data.save_date = now_date;\r\n        } else if (user_data.user_data.save_date != now_date) {\r\n            //日期不相同，默认第二天及以后,重置分享次数\r\n            for (var i = 0; i < arr.length; i++) {\r\n                if (user_data.user_data.pet[i].share_count !== undefined) {\r\n                    user_data.user_data.pet[i].share_count = 0;\r\n                    // user_data.user_data.videotape_share_count = 0;\r\n\r\n                };\r\n            };\r\n            user_data.user_data.save_date = now_date;\r\n        } else {\r\n            //日期为同一天\r\n        };\r\n    },\r\n    //=============================================================================================\r\n    //=============================================================================================\r\n\r\n    //初始化录屏功能\r\n    ini_videotape() {\r\n        //录屏的保存路径\r\n        this.videotape_path = null;\r\n        this.videotape_start_time = 0;\r\n        this.videotape_state = \"unstart\";\r\n    },\r\n    on_videotape_button_click() {\r\n        this.sound_control.play_sound_effect(\"button_click\");\r\n        if (this.videotape_state == \"unstart\") {\r\n            //未开始进入奖励界面\r\n            this.game_scene_js.create_videotape_ui();\r\n        } else if (this.videotape_state == \"start\") {\r\n            //开始后大于3秒才能关闭\r\n            var now_time = new Date().getTime();\r\n            var videotape_time = now_time - this.videotape_start_time;\r\n            if (videotape_time < 3000) {\r\n                this.game_scene_js.create_tips_ui(this.node, \"videotape_no_time\");\r\n            } else {\r\n                this.stop_videotape();\r\n            };\r\n        };\r\n    },\r\n    //开始游戏录屏\r\n    start_videotape: function () {\r\n        //记录一个时间戳\r\n        this.videotape_start_time = new Date().getTime();\r\n        if (typeof (wx) != \"undefined\") {\r\n\r\n            this.videotape_state = \"start\";\r\n            this.videotape_timeControl();\r\n            //切换录屏按钮图标\r\n            this.videotape_button.getComponent(cc.Sprite).spriteFrame = this.videotape_button_arr[1];\r\n            this.game_scene_js.create_tips_ui(this.node, \"videotape_start\");\r\n\r\n            this.recorder = wx.getGameRecorderManager();\r\n            this.recorder.onStart(res => {\r\n                // console.log(\"录屏开始\");\r\n                // do somethine;\r\n            });\r\n            this.recorder.start({\r\n                duration: 60\r\n            });\r\n        };\r\n\r\n    },\r\n    //结束游戏录屏\r\n    stop_videotape: function () {\r\n        if (typeof (wx) != \"undefined\") {\r\n            this.videotape_state = \"unstart\";\r\n            this.game_scene_js.create_tips_ui(this.node, \"vidotape_over\");\r\n            this.videotape_button.getComponent(cc.Sprite).spriteFrame = this.videotape_button_arr[0];\r\n\r\n            this.recorder.onStop(res => {\r\n                // console.log(res.videoPath, \"录屏结束\");\r\n                // do somethine;\r\n                this.videotape_path = res.videoPath;\r\n                this.game_scene_js.create_videotape_ui();\r\n            });\r\n            this.recorder.stop();\r\n\r\n        };\r\n    },\r\n    //录屏时间控制\r\n    videotape_timeControl() {\r\n        var time_count = 0;\r\n        var callback = function () {\r\n            time_count++;\r\n            //超过了最大时长或者录制状态为未开启\r\n            if (time_count >= 60 || this.videotape_state == \"unstart\") {\r\n                this.unschedule(callback);\r\n                time_count = 0;\r\n                this.stop_videotape();\r\n                this.game_scene_js.create_tips_ui(this.node, \"vidotape_over\");\r\n            };\r\n        };\r\n        this.schedule(callback, 1, cc.macro.REPEAT_FOREVER);\r\n    },\r\n\r\n    //=============================================================================================\r\n    //=============================================================================================\r\n\r\n    //初始化节点\r\n    ini_node: function () {\r\n        fx.load();\r\n        this.create_land();\r\n        this.create_pet();\r\n        this.add_gold_anim = 0;\r\n        this.add_ex_anim = 0;\r\n        //调用碰撞检测组件\r\n        this.manager = cc.director.getCollisionManager();\r\n        //默认碰撞为关\r\n        this.manager.enabled = true;\r\n        this.set_gold_progress();\r\n        this.set_ex_progress();\r\n        this.create_player();\r\n        this.create_staff();\r\n        this.auto_save();\r\n        this.save_login_time();\r\n        this.create_button_tips();\r\n        this.offline_profit_ui();\r\n        this.create_novice();\r\n        this.sound_control.play_bg_sound(\"home_bg\");\r\n        this.ini_hotel_produce();\r\n        this.judge_date();\r\n        this.wareHouse_full();\r\n        this.ini_videotape();\r\n        this.diamond_label.string = user_data.user_data.diamond;\r\n    },\r\n\r\n\r\n\r\n    //===================================================================================\r\n    //===================================================================================\r\n    on_test_button_click(e, custom) {\r\n        switch (custom) {\r\n            case \"0\":\r\n                this.add_gold(user_data.user_data.skill.gold_max * 500 + 500);\r\n                break;\r\n            case \"1\":\r\n                this.add_ex(2 * user_data.user_data.level + 1);\r\n                break;\r\n            case \"2\":\r\n                if (user_data.user_data.pet[0].have == 0) {\r\n                    user_data.user_data.pet[0].have = 1;\r\n                    this.game_scene_js.create_pet(this.node, 0);\r\n                }\r\n                if (user_data.user_data.pet[1].have == 0) {\r\n                    user_data.user_data.pet[1].have = 1;\r\n                    this.game_scene_js.create_pet(this.node, 1);\r\n                }\r\n                if (user_data.user_data.pet[2].have == 0) {\r\n                    user_data.user_data.pet[2].have = 1;\r\n                    this.game_scene_js.create_pet(this.node, 2);\r\n                }\r\n                if (user_data.user_data.pet[3].have == 0) {\r\n                    user_data.user_data.pet[3].have = 1;\r\n                    this.game_scene_js.create_pet(this.node, 3);\r\n                }\r\n                // this.game_scene_js.create_pet(this.node, 0);\r\n                // this.game_scene_js.create_pet(this.node, 1);\r\n                // console.log(\"have pet \" + user_data.user_data.pet[0].have);\r\n                // console.log(\"have pet \" + user_data.user_data.pet[1].have);\r\n                break;\r\n            case \"3\":\r\n                user_data.user_data.pet[2].have = 1;\r\n                break;\r\n            case \"4\":\r\n                user_data.user_data.pet[2].have = 0;\r\n                break;\r\n        };\r\n    },\r\n\r\n    onLoad() {\r\n        this.game_scene_js = cc.find(\"UI_ROOT\").getComponent(\"game_scene\");\r\n        this.sound_control = cc.find(\"sound_control\").getComponent(\"sound_control\");\r\n        this.ini_node();\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}