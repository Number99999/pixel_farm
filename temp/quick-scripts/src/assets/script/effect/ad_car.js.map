{"version":3,"sources":["assets\\script\\effect\\ad_car.js"],"names":["cc","Class","Component","properties","ad_car_node","Node","ini_node","price_difference","ad_control","find","getComponent","game_scene_js","game_rules_js","node","x","tween","to","easing","call","on","create_ad","start","show_videoAd","video_succes","wx","callback","video_state","video_tag","create_tips_ui","add_gold","unschedule","destroy","schedule","onLoad"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,WAAW,EAAEJ,EAAE,CAACK;AADR,GAHP;AAML;AACAC,EAAAA,QAPK,oBAOIC,gBAPJ,EAOsB;AAAA;;AACvB,SAAKA,gBAAL,GAAwBA,gBAAxB;AACA,SAAKC,UAAL,GAAkBR,EAAE,CAACS,IAAH,CAAQ,YAAR,EAAsBC,YAAtB,CAAmC,YAAnC,CAAlB;AACA,SAAKC,aAAL,GAAqBX,EAAE,CAACS,IAAH,CAAQ,SAAR,EAAmBC,YAAnB,CAAgC,YAAhC,CAArB;AACA,SAAKE,aAAL,GAAoBZ,EAAE,CAACS,IAAH,CAAQ,SAAR,EAAmBC,YAAnB,CAAgC,YAAhC,CAApB;AAAkE;AAClE,SAAKG,IAAL,CAAUC,CAAV,GAAc,GAAd;AACAd,IAAAA,EAAE,CAACe,KAAH,CAAS,KAAKF,IAAd,EACKG,EADL,CACQ,GADR,EACa;AAAEF,MAAAA,CAAC,EAAE;AAAL,KADb,EACuB;AAAEG,MAAAA,MAAM,EAAE;AAAV,KADvB,EAEKC,IAFL,CAEU,YAAM;AACR,MAAA,KAAI,CAACd,WAAL,CAAiBe,EAAjB,CAAoB,YAApB,EAAkC,KAAI,CAACC,SAAvC,EAAkD,KAAlD;AACH,KAJL,EAKKC,KALL;AAMH,GAnBI;AAoBL;AACAD,EAAAA,SArBK,uBAqBO;AACR;AACA,SAAKZ,UAAL,CAAgBc,YAAhB,CAA6B,QAA7B;AACA,SAAKC,YAAL;AACH,GAzBI;AA0BL;AACAA,EAAAA,YAAY,EAAE,wBAAY;AACtB,QAAI,OAAQC,EAAR,IAAe,WAAnB,EAAgC;AAC5B,UAAIC,QAAQ,GAAG,SAAXA,QAAW,GAAY;AACvB,YAAI,KAAKjB,UAAL,CAAgBkB,WAAhB,IAA+B,CAA/B,IAAoC,KAAKlB,UAAL,CAAgBmB,SAAhB,IAA6B,QAArE,EAA+E;AAC3E,eAAKnB,UAAL,CAAgBmB,SAAhB,GAA4B,IAA5B;AACA,eAAKnB,UAAL,CAAgBkB,WAAhB,GAA8B,CAA9B;AACA,cAAIb,IAAI,GAAG,KAAKF,aAAL,CAAmBiB,cAAnB,CAAkC,KAAKhB,aAAL,CAAmBC,IAArD,CAAX;;AACA,cAAIA,IAAI,IAAI,IAAZ,EAAkB;AACdA,YAAAA,IAAI,CAACH,YAAL,CAAkB,SAAlB,EAA6BJ,QAA7B,CAAsC,MAAtC,EAA8C,KAAKC,gBAAnD;AACA,iBAAKK,aAAL,CAAmBiB,QAAnB,CAA4B,KAAKtB,gBAAjC;AACH;;AAAA;AACD,eAAKuB,UAAL,CAAgBL,QAAhB;AACA,eAAKZ,IAAL,CAAUkB,OAAV;AACH,SAVD,MAUO;AACH,cAAI,KAAKvB,UAAL,CAAgBmB,SAAhB,IAA6B,IAA7B,IAAqC,KAAKnB,UAAL,CAAgBkB,WAAhB,IAA+B,CAAxE,EAA2E;AACvE,iBAAKI,UAAL,CAAgBL,QAAhB;AACH;;AAAA;AACJ;;AAAA;AACJ,OAhBD;;AAiBA,WAAKO,QAAL,CAAcP,QAAd,EAAwB,GAAxB;AACH;;AAAA;AACJ,GAhDI;AAiDLQ,EAAAA,MAjDK,oBAiDI,CAER,CAnDI;AAqDLZ,EAAAA,KArDK,mBAqDG,CAEP,CAvDI,CAyDL;;AAzDK,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        ad_car_node: cc.Node,\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n    ini_node(price_difference) {\r\n        this.price_difference = price_difference;\r\n        this.ad_control = cc.find(\"ad_control\").getComponent(\"ad_control\");\r\n        this.game_scene_js = cc.find(\"UI_ROOT\").getComponent(\"game_scene\");\r\n        this.game_rules_js= cc.find(\"UI_ROOT\").getComponent(\"game_rules\");;\r\n        this.node.x = 500;\r\n        cc.tween(this.node)\r\n            .to(0.5, { x: 0 }, { easing: \"elasticOut\" })\r\n            .call(() => {\r\n                this.ad_car_node.on(\"touchstart\", this.create_ad, this);\r\n            })\r\n            .start();\r\n    },\r\n    //拉起广告\r\n    create_ad() {\r\n        // this.node.destroy();\r\n        this.ad_control.show_videoAd(\"ad_car\");\r\n        this.video_succes();\r\n    },\r\n    //检测视频是否播放成功\r\n    video_succes: function () {\r\n        if (typeof (wx) != \"undefined\") {\r\n            var callback = function () {\r\n                if (this.ad_control.video_state == 1 && this.ad_control.video_tag == \"ad_car\") {\r\n                    this.ad_control.video_tag = null;\r\n                    this.ad_control.video_state = 2;\r\n                    var node = this.game_scene_js.create_tips_ui(this.game_rules_js.node);\r\n                    if (node != null) {\r\n                        node.getComponent(\"tips_ui\").ini_node(\"gold\", this.price_difference);\r\n                        this.game_rules_js.add_gold(this.price_difference);\r\n                    };\r\n                    this.unschedule(callback);\r\n                    this.node.destroy();\r\n                } else {\r\n                    if (this.ad_control.video_tag == null && this.ad_control.video_state == 2) {\r\n                        this.unschedule(callback);\r\n                    };\r\n                };\r\n            };\r\n            this.schedule(callback, 0.2);\r\n        };\r\n    },\r\n    onLoad() {\r\n\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}