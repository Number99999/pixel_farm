{"version":3,"sources":["assets\\script\\ui\\hotel_ui.js"],"names":["cc","Class","Component","properties","lock_group_node","Node","label_group_node","hotel_eject_node","buy_tittle_label","Label","cost_label","iocn_frame_arr","SpriteFrame","buy_button_node","ini_node","game_scene_js","find","getComponent","game_rules_js","ad_control","sound_control","ad_car","i","children","length","user_data","hotel","have","active","Sprite","spriteFrame","Button","interactable","string","config","need_level","ini_hotel_eject","index","room_index","produce_time","produce","cost","on_lock_button_click","e","level","play_sound_effect","create_ad_car","create_tips_ui","node","on_touch_exit_click","on_node_kill","on_hotel_eject_exit_click","destroy","on_buy_button_click","gold","add_gold","hotel_buy_room","all_capacity","skill","price_difference","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["import user_data from \"user_data\";\r\nimport config from \"config\";\r\n\r\ncc.Class({\r\n\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        lock_group_node: cc.Node,\r\n        label_group_node: cc.Node,\r\n        hotel_eject_node: cc.Node,\r\n        buy_tittle_label: cc.Label,\r\n        cost_label: cc.Label,\r\n        iocn_frame_arr: [cc.SpriteFrame],\r\n        buy_button_node: cc.Node,\r\n    },\r\n\r\n    //初始化节点\r\n    ini_node() {\r\n        this.game_scene_js = cc.find(\"UI_ROOT\").getComponent(\"game_scene\");\r\n        this.game_rules_js = cc.find(\"UI_ROOT\").getComponent(\"game_rules\");\r\n        this.ad_control = cc.find(\"ad_control\").getComponent(\"ad_control\");\r\n        this.sound_control = cc.find(\"sound_control\").getComponent(\"sound_control\");\r\n        this.ad_car = null;\r\n        for (var i = 0; i < this.lock_group_node.children.length; i++) {\r\n            if (user_data.user_data.hotel[i].have == 1) {\r\n                this.label_group_node.children[i].active = false;\r\n                this.hotel_eject_node.active = false;\r\n                this.lock_group_node.children[i].getComponent(cc.Sprite).spriteFrame = this.iocn_frame_arr[1];\r\n            } else {\r\n                this.label_group_node.children[i].active = true;\r\n                this.lock_group_node.children[i].getComponent(cc.Sprite).spriteFrame = this.iocn_frame_arr[0];\r\n                this.lock_group_node.children[i].getComponent(cc.Button).interactable = true;\r\n                this.label_group_node.children[i].getComponent(cc.Label).string = config.hotel[i].need_level;\r\n            };\r\n        };\r\n\r\n    },\r\n    //初始化弹出界面\r\n    ini_hotel_eject(index) {\r\n        if (user_data.user_data.hotel[index].have == 1) {\r\n            this.buy_button_node.active = false;\r\n        } else {\r\n            this.buy_button_node.active = true;\r\n        };\r\n        this.buy_tittle_label.string = \"Rent a house every other\" + config.hotel[this.room_index].produce_time + \"seconds to get\" + config.hotel[this.room_index].produce + \"gold\";\r\n        this.cost_label.string = config.hotel[this.room_index].cost;\r\n    },\r\n    //on lock button click\r\n    on_lock_button_click(e, index) {\r\n        this.room_index = index;\r\n        var level = user_data.user_data.level;\r\n        if (level >= config.hotel[index].need_level) {\r\n            this.sound_control.play_sound_effect(\"button_click\");\r\n            this.hotel_eject_node.active = true;\r\n            this.ini_hotel_eject(index);\r\n            this.create_ad_car();\r\n        } else {\r\n            this.sound_control.play_sound_effect(\"un_click\");\r\n            this.game_scene_js.create_tips_ui(this.game_scene_js.node, \"no_level\");\r\n        };\r\n    },\r\n    //touch exit\r\n    on_touch_exit_click(e) {\r\n\r\n        this.sound_control.play_sound_effect(\"button_exit\");\r\n        this.game_scene_js.on_node_kill(this.node);\r\n    },\r\n    //hotel_eject exit\r\n    on_hotel_eject_exit_click() {\r\n        this.sound_control.play_sound_effect(\"button_exit\");\r\n        if (this.ad_car !== null) {\r\n            this.ad_car.destroy();\r\n        };\r\n        this.hotel_eject_node.active = false;\r\n    },\r\n    //购买按钮被点击\r\n    on_buy_button_click() {\r\n        var gold = user_data.user_data.gold;\r\n        var cost = config.hotel[this.room_index].cost\r\n        if (gold >= cost) {\r\n            this.sound_control.play_sound_effect(\"button_click\");\r\n            this.game_scene_js.create_tips_ui(this.game_scene_js.node, \"buy_succes\");\r\n            this.game_rules_js.add_gold(-cost);\r\n            user_data.user_data.hotel[this.room_index].have = 1;\r\n            this.game_rules_js.hotel_buy_room(this.room_index);\r\n            this.ini_node();\r\n        } else {\r\n            this.sound_control.play_sound_effect(\"un_click\");\r\n            this.game_scene_js.create_tips_ui(this.game_scene_js.node, \"no_money_gold\");\r\n        };\r\n    },\r\n    //创建ad_car\r\n    create_ad_car() {\r\n        if (user_data.user_data.hotel[this.room_index].have != 1) {\r\n            var gold = user_data.user_data.gold;\r\n            var all_capacity = 500 * user_data.user_data.skill[\"gold_max\"] + 500;\r\n            var cost = (config.hotel[this.room_index].cost);\r\n            //差价\r\n            var price_difference = cost - gold;\r\n            //大于4/5,且能够拥有，且金币不足\r\n            if (gold >= cost * (4 / 5) && all_capacity >= cost && gold < cost) {\r\n\r\n                this.ad_car = this.game_scene_js.create_ad_car(this.node, price_difference);\r\n            };\r\n        } else {\r\n            return;\r\n        }\r\n\r\n    },\r\n    // onLoad () {},\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}