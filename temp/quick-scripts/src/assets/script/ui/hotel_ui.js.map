{"version":3,"sources":["assets\\script\\ui\\hotel_ui.js"],"names":["cc","Class","Component","properties","lock_group_node","Node","label_group_node","hotel_eject_node","buy_tittle_label","Label","cost_label","iocn_frame_arr","SpriteFrame","buy_button_node","ini_node","game_scene_js","find","getComponent","game_rules_js","ad_control","sound_control","ad_car","i","children","length","user_data","hotel","have","active","Sprite","spriteFrame","Button","interactable","string","config","need_level","show_bannerAd","ini_hotel_eject","index","room_index","produce_time","produce","cost","on_lock_button_click","e","level","play_sound_effect","create_ad_car","create_tips_ui","node","on_touch_exit_click","hide_bannerAd","on_node_kill","on_hotel_eject_exit_click","destroy","on_buy_button_click","gold","add_gold","hotel_buy_room","all_capacity","skill","price_difference","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["import user_data from \"user_data\";\nimport config from \"config\";\n\ncc.Class({\n\n    extends: cc.Component,\n\n    properties: {\n        lock_group_node: cc.Node,\n        label_group_node: cc.Node,\n        hotel_eject_node: cc.Node,\n        buy_tittle_label: cc.Label,\n        cost_label: cc.Label,\n        iocn_frame_arr: [cc.SpriteFrame],\n        buy_button_node: cc.Node,\n    },\n\n    //初始化节点\n    ini_node() {\n        this.game_scene_js = cc.find(\"UI_ROOT\").getComponent(\"game_scene\");\n        this.game_rules_js = cc.find(\"UI_ROOT\").getComponent(\"game_rules\");\n        this.ad_control = cc.find(\"ad_control\").getComponent(\"ad_control\");\n        this.sound_control = cc.find(\"sound_control\").getComponent(\"sound_control\");\n        this.ad_car = null;\n        for (var i = 0; i < this.lock_group_node.children.length; i++) {\n            if (user_data.user_data.hotel[i].have == 1) {\n                this.label_group_node.children[i].active = false;\n                this.hotel_eject_node.active = false;\n                this.lock_group_node.children[i].getComponent(cc.Sprite).spriteFrame = this.iocn_frame_arr[1];\n            } else {\n                this.label_group_node.children[i].active = true;\n                this.lock_group_node.children[i].getComponent(cc.Sprite).spriteFrame = this.iocn_frame_arr[0];\n                this.lock_group_node.children[i].getComponent(cc.Button).interactable = true;\n                this.label_group_node.children[i].getComponent(cc.Label).string = config.hotel[i].need_level;\n            };\n        };\n        this.ad_control.show_bannerAd();\n    },\n    //初始化弹出界面\n    ini_hotel_eject(index) {\n        if (user_data.user_data.hotel[index].have == 1) {\n            this.buy_button_node.active = false;\n        } else {\n            this.buy_button_node.active = true;\n        };\n        this.buy_tittle_label.string = \"Rent a house every other\" + config.hotel[this.room_index].produce_time + \"seconds to get\" + config.hotel[this.room_index].produce + \"gold\";\n        this.cost_label.string = config.hotel[this.room_index].cost;\n    },\n    //on lock button click\n    on_lock_button_click(e, index) {\n        this.room_index = index;\n        var level = user_data.user_data.level;\n        if (level >= config.hotel[index].need_level) {\n            this.sound_control.play_sound_effect(\"button_click\");\n            this.hotel_eject_node.active = true;\n            this.ini_hotel_eject(index);\n            this.create_ad_car();\n        } else {\n            this.sound_control.play_sound_effect(\"un_click\");\n            this.game_scene_js.create_tips_ui(this.game_scene_js.node, \"no_level\");\n        };\n    },\n    //touch exit\n    on_touch_exit_click(e) {\n        this.ad_control.hide_bannerAd();\n        this.sound_control.play_sound_effect(\"button_exit\");\n        this.game_scene_js.on_node_kill(this.node);\n    },\n    //hotel_eject exit\n    on_hotel_eject_exit_click() {\n        this.sound_control.play_sound_effect(\"button_exit\");\n        if (this.ad_car !== null) {\n            this.ad_car.destroy();\n        };\n        this.hotel_eject_node.active = false;\n    },\n    //购买按钮被点击\n    on_buy_button_click() {\n        var gold = user_data.user_data.gold;\n        var cost = config.hotel[this.room_index].cost\n        if (gold >= cost) {\n            this.sound_control.play_sound_effect(\"button_click\");\n            this.game_scene_js.create_tips_ui(this.game_scene_js.node, \"buy_succes\");\n            this.game_rules_js.add_gold(-cost);\n            user_data.user_data.hotel[this.room_index].have = 1;\n            this.game_rules_js.hotel_buy_room(this.room_index);\n            this.ini_node();\n        } else {\n            this.sound_control.play_sound_effect(\"un_click\");\n            this.game_scene_js.create_tips_ui(this.game_scene_js.node, \"no_money_gold\");\n        };\n    },\n    //创建ad_car\n    create_ad_car() {\n        if (user_data.user_data.hotel[this.room_index].have != 1) {\n            var gold = user_data.user_data.gold;\n            var all_capacity = 500 * user_data.user_data.skill[\"gold_max\"] + 500;\n            var cost = (config.hotel[this.room_index].cost);\n            //差价\n            var price_difference = cost - gold;\n            //大于4/5,且能够拥有，且金币不足\n            if (gold >= cost * (4 / 5) && all_capacity >= cost && gold < cost) {\n                this.ad_control.hide_bannerAd();\n                this.ad_car = this.game_scene_js.create_ad_car(this.node, price_difference);\n            };\n        } else {\n            return;\n        }\n\n    },\n    // onLoad () {},\n\n    start() {\n\n    },\n\n    // update (dt) {},\n});\n"]}