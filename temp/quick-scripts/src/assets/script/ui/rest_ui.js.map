{"version":3,"sources":["assets\\script\\ui\\rest_ui.js"],"names":["user_data","require","cc","Class","Component","properties","role_sprite","Sprite","role_arr","SpriteFrame","center_node","Node","ini_node","staff_index","ad_control","find","getComponent","game_scene_js","sound_control","show_bannerAd","spriteFrame","scale","ini_anim","tween","to","easing","start","on_iwanna_button_click","log","play_sound_effect","show_videoAd","video_succes","on_touch_exit_click","e","node","destroy","on_keep_rest_button_click","hide_bannerAd","wx","callback","video_state","video_tag","staff","over_time","create_tips_ui","unschedule","schedule","onLoad"],"mappings":"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","sourceRoot":"/","sourcesContent":["var user_data = require(\"user_data\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        role_sprite: cc.Sprite,\n        role_arr: [cc.SpriteFrame],\n        center_node: cc.Node,\n    },\n    //初始化节点\n    ini_node(staff_index) {\n        this.ad_control = cc.find(\"ad_control\").getComponent(\"ad_control\");\n        this.game_scene_js = cc.find(\"UI_ROOT\").getComponent(\"game_scene\");\n        this.sound_control = cc.find(\"sound_control\").getComponent(\"sound_control\");\n        this.ad_control.show_bannerAd();\n        //初始小人的形象\n        this.staff_index = staff_index;\n        this.role_sprite.spriteFrame = this.role_arr[staff_index];\n        this.center_node.scale = 0;\n        this.ini_anim();\n    },\n    //初始化动画\n    ini_anim() {\n        cc.tween(this.center_node)\n            .to(0.3, { scale: 1 }, { easing: \"sineOut\" })\n            .start();\n    },\n    //i wanna button click\n    on_iwanna_button_click() {\n        cc.log(\"create_ad\");\n        this.sound_control.play_sound_effect(\"button_click\");\n        this.ad_control.show_videoAd(\"staff_rest\");\n        this.video_succes();\n    },\n    on_touch_exit_click(e) {\n        this.node.destroy();\n    },\n    //keep rest\n    on_keep_rest_button_click() {\n        this.sound_control.play_sound_effect(\"button_exit\");\n        this.ad_control.hide_bannerAd();\n        this.node.destroy();\n    },\n    //检测视频是否播放成功\n    video_succes: function () {\n        if (typeof (wx) != \"undefined\") {\n            var callback = function () {\n                if (this.ad_control.video_state == 1 && this.ad_control.video_tag == \"staff_rest\") {\n                    this.ad_control.video_tag = null;\n                    this.ad_control.video_state = 2;\n                    user_data.user_data.staff[this.staff_index].over_time = 0;\n                    this.game_scene_js.create_tips_ui(this.game_scene_js.node, \"staff_rest_over\");\n                    this.unschedule(callback);\n                    this.ad_control.hide_bannerAd();\n                    this.node.destroy();\n                } else {\n                    if (this.ad_control.video_tag == null && this.ad_control.video_state == 2) {\n                        this.unschedule(callback);\n                    };\n                };\n            };\n            this.schedule(callback, 0.2);\n        };\n    },\n    onLoad() { },\n\n    start() {\n\n    },\n\n    // update (dt) {},\n});\n"]}