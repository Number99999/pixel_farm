{"version":3,"sources":["assets\\script\\ui\\staff_content.js"],"names":["user_data","require","config","cc","Class","Component","properties","icon_sprite","Sprite","work_time_label","Label","rest_time_label","cost_label","icon_frame_arr","SpriteFrame","buy_button","Node","work_time_buff_label","rest_time_buff_label","employed_button","name_lable","introduce_label","ini_node","staff_index","game_scene_js","find","getComponent","game_rules_js","ad_control","sound_control","update_content","spriteFrame","string","staff","work_time","rest_time","name","introduce","skill","node","active","trader","cost","have","on_buy_button_click","gold","create_staff","gold_max","gold_label","play_sound_effect","create_tips_ui","touch_exit","destroy","create_ad_car","all_capacity","price_difference","hide_bannerAd","onLoad","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["var user_data = require(\"user_data\");\r\nvar config = require(\"config\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        icon_sprite: cc.Sprite,\r\n        work_time_label: cc.Label,\r\n        rest_time_label: cc.Label,\r\n        cost_label: cc.Label,\r\n        icon_frame_arr: [cc.SpriteFrame],\r\n        buy_button: cc.Node,\r\n        work_time_buff_label: cc.Label,\r\n        rest_time_buff_label: cc.Label,\r\n        employed_button: cc.Node,\r\n        name_lable: cc.Label,\r\n        introduce_label: cc.Label,\r\n    },\r\n    //ini node\r\n    ini_node: function (staff_index) {\r\n        this.game_scene_js = cc.find(\"UI_ROOT\").getComponent(\"game_scene\");\r\n        this.game_rules_js = cc.find(\"UI_ROOT\").getComponent(\"game_rules\");\r\n        this.ad_control = cc.find(\"ad_control\").getComponent(\"ad_control\");\r\n        this.sound_control = cc.find(\"sound_control\").getComponent(\"sound_control\");\r\n        this.staff_index = staff_index;\r\n        this.update_content();\r\n        // this.create_ad_car();\r\n    },\r\n    //刷新数据\r\n    update_content() {\r\n        this.icon_sprite.spriteFrame = this.icon_frame_arr[this.staff_index];\r\n        this.work_time_label.string = \"Active time:\" + config.staff[this.staff_index].work_time + \"seconds\";\r\n        this.rest_time_label.string = \"Free time:\" + config.staff[this.staff_index].rest_time + \"seconds\";\r\n        this.name_lable.string = config.staff[this.staff_index].name;\r\n        this.introduce_label.string = config.staff[this.staff_index].introduce;\r\n        //技能提示\r\n        if (user_data.user_data.skill[\"labor_contract\"] == 0) {\r\n            this.work_time_buff_label.node.active = false;\r\n        } else {\r\n            this.work_time_buff_label.node.active = true;\r\n            this.work_time_buff_label.string = \"+\" + user_data.user_data.skill[\"labor_contract\"];\r\n        };\r\n        if (user_data.user_data.trader[\"recipes\"] == 0) {\r\n            this.rest_time_buff_label.node.active = false;\r\n        } else {\r\n            this.rest_time_buff_label.node.active = true;\r\n            this.rest_time_buff_label.string = \"-\" + user_data.user_data.trader[\"recipes\"];\r\n        };\r\n\r\n        this.cost_label.string = \"Cost:\" + config.staff[this.staff_index].cost;\r\n        if (user_data.user_data.staff[this.staff_index].have == 0) {\r\n            this.buy_button.active = true;\r\n            this.employed_button.active = false;\r\n        } else {\r\n            this.buy_button.active = false;\r\n            this.employed_button.active = true;\r\n        };\r\n    },\r\n    //buy staff\r\n    on_buy_button_click: function () {\r\n        if (user_data.user_data.gold >= config.staff[this.staff_index].cost) {\r\n            user_data.user_data.gold -= config.staff[this.staff_index].cost;\r\n            user_data.user_data.staff[this.staff_index].have = 1;\r\n            this.game_rules_js.create_staff(this.staff_index);\r\n            var gold_max = 500 * user_data.user_data.skill[\"gold_max\"] + 500;\r\n            this.game_rules_js.gold_label.getComponent(cc.Label).string = user_data.user_data.gold + \"/\" +gold_max;\r\n            this.buy_button.active = false;\r\n            this.sound_control.play_sound_effect(\"button_click\");\r\n            this.update_content();\r\n        } else {\r\n            this.sound_control.play_sound_effect(\"un_click\");\r\n            this.game_scene_js.create_tips_ui(this.game_rules_js.node, \"no_money_gold\");\r\n        };\r\n    },\r\n    touch_exit: function () {\r\n        this.sound_control.play_sound_effect(\"button_exit\");\r\n        this.node.destroy();\r\n    },\r\n    //创建ad_car\r\n    create_ad_car() {\r\n        if (user_data.user_data.staff[this.staff_index].have != 1) {\r\n            var gold = user_data.user_data.gold;\r\n            var all_capacity = 500 * user_data.user_data.skill[\"gold_max\"] + 500;\r\n            var cost = (config.staff[this.staff_index].cost);\r\n            //差价\r\n            var price_difference = cost - gold;\r\n            //大于4/5,且能够拥有，且金币不足\r\n            if (gold >= cost * (4 / 5) && all_capacity >= cost && gold < cost) {\r\n                this.ad_control.hide_bannerAd();\r\n                // this.game_scene_js.create_ad_car(this.node, price_difference);\r\n            };\r\n        } else {\r\n            return;\r\n        }\r\n\r\n    },\r\n    onLoad() {\r\n\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}