{"version":3,"sources":["assets\\script\\ui\\land.js"],"names":["user_data","require","config","cc","Class","Component","properties","tips_node","Node","plant_node","plant_progress_node","water_progress_node","plant_progress_label","Label","button","button_frame_arr","SpriteFrame","land_frame_arr","plant0_frame_arr","plant1_frame_arr","plant2_frame_arr","plant3_frame_arr","plant4_frame_arr","plant5_frame_arr","plant6_frame_arr","plant7_frame_arr","set_plant","active","alive_stage","land","land_index","i","children","length","getComponent","Sprite","spriteFrame","plant_frame_arr","plant_type","plant_grow","land_state","grow_time","plant","now_time","bar","ProgressBar","watering","plant_grow_schedule","water_buff","unschedule","string","wait_next","progress","progress_num","parseInt","update_plant_alive_stage","schedule","plantSprite","plant_index","plant_count","rest_plat_alive_stage","water_schedule","type","state","cut","cut_time","skill","cut_schedule","sound_control","play_sound_effect","node","game_scene_js","create_light_effect","ini_node","on_button_click","create_plant_ui","till","all_water","all_water_num","water_num","water_charge","water_state","callback","now_water","have_water","index","find","have","plant_schedule","till_time","plant_time","log","onLoad","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["var user_data = require(\"user_data\");\nvar config = require(\"config\");\n\n/*land state :{\n    cut :\n    till:\n    water:\n    plant:\n    grow :\n};*/\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        tips_node: cc.Node,\n        plant_node: cc.Node,\n        plant_progress_node: cc.Node,\n        water_progress_node: cc.Node,\n        plant_progress_label: cc.Label,\n        button: cc.Node,\n        button_frame_arr: [cc.SpriteFrame],\n        land_frame_arr: [cc.SpriteFrame],\n        plant0_frame_arr: [cc.SpriteFrame],\n        plant1_frame_arr: [cc.SpriteFrame],\n        plant2_frame_arr: [cc.SpriteFrame],\n        plant3_frame_arr: [cc.SpriteFrame],\n        plant4_frame_arr: [cc.SpriteFrame],\n        plant5_frame_arr: [cc.SpriteFrame],\n        plant6_frame_arr: [cc.SpriteFrame],\n        plant7_frame_arr: [cc.SpriteFrame],\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    //设置种植的植物\n    set_plant: function () {\n        this.plant_node.active = true;\n        var alive_stage = user_data.user_data.land[this.land_index].alive_stage;\n        for (var i = 0; i < this.plant_node.children.length; i++) {\n            this.plant_node.children[i].getComponent(cc.Sprite).spriteFrame = this.plant_frame_arr[this.plant_type][alive_stage];\n        };\n        this.plant_grow();\n    },\n    //植物生长\n    plant_grow: function () {\n        user_data.user_data.land[this.land_index].land_state = \"grow\"; // note thì growing chạy quá 100%\n        var land_state = user_data.user_data.land[this.land_index].land_state;\n        this.plant_progress_node.active = true;\n        var grow_time = config.plant[this.plant_type].grow_time;\n        var now_time = 0;\n        var bar = this.plant_progress_node.getComponent(cc.ProgressBar);\n        this.watering();\n        this.plant_grow_schedule = function () {\n            now_time += 0.1 * this.water_buff;\n            if (now_time >= grow_time && land_state == \"grow\") {\n                this.unschedule(this.plant_grow_schedule);\n                this.plant_progress_label.string = \"Waiting for harvest\";\n                this.wait_next(\"wait_cut\");\n                return;\n            } else {\n                bar.progress = now_time / grow_time;\n                var progress_num = parseInt(bar.progress * 100);\n                this.plant_progress_label.string = \"Growing \" + progress_num + \"%\";\n                this.update_plant_alive_stage(progress_num);\n                if (progress_num < 25) {\n                    for (var i = 0; i < this.plant_node.children.length; i++) {\n                        this.plant_node.children[i].getComponent(cc.Sprite).spriteFrame = this.plant_frame_arr[this.plant_type][0];\n                    };\n                }\n                else if (progress_num < 50) {\n                    for (var i = 0; i < this.plant_node.children.length; i++) {\n                        this.plant_node.children[i].getComponent(cc.Sprite).spriteFrame = this.plant_frame_arr[this.plant_type][1];\n\n                    };\n                }\n                else if (progress_num < 75) {\n                    for (var i = 0; i < this.plant_node.children.length; i++) {\n                        this.plant_node.children[i].getComponent(cc.Sprite).spriteFrame = this.plant_frame_arr[this.plant_type][2];\n                    };\n                }\n                else for (var i = 0; i < this.plant_node.children.length; i++) {\n                    this.plant_node.children[i].getComponent(cc.Sprite).spriteFrame = this.plant_frame_arr[this.plant_type][3];\n                };\n            };\n        };\n        this.schedule(this.plant_grow_schedule, 0.1);\n    },\n    //更新植物等级\n    update_plant_alive_stage: function (progress_num) {\n        //2的倍数\n        var alive_stage = user_data.user_data.land[this.land_index].alive_stage;\n        let plantSprite = this.plant_node.children[this.plant_index].getComponent(cc.Sprite).spriteFrame;\n        if (plantSprite) {\n            plantSprite = this.plant_frame_arr[this.plant_type][alive_stage];\n        };\n        if (progress_num >= 25 / 12 * this.plant_count) {\n            this.plant_index++;\n            this.plant_count++;\n            if (this.plant_count > 48) {\n                this.plant_count = 48;\n            };\n            if (this.plant_index > 11) {\n                user_data.user_data.land[this.land_index].alive_stage++;\n                if (user_data.user_data.land[this.land_index].alive_stage > 3) {\n                    user_data.user_data.land[this.land_index].alive_stage = 3;\n                };\n                this.plant_index = 0;\n            };\n        };\n    },\n    //重置植物的生长状态\n    rest_plat_alive_stage: function () {\n        user_data.user_data.land[this.land_index].alive_stage = 0;\n        this.plant_index = 0;\n        this.plant_count = 0;\n        this.unschedule(this.water_schedule);\n        this.unschedule(this.plant_grow_schedule);\n        this.set_plant();\n    },\n    //đợi trạng thái tiếp theo\n    wait_next: function (type) {\n        this.button.state = type;\n        switch (type) {\n            case \"wait_cut\":\n                this.button.children[0].getComponent(cc.Sprite).spriteFrame = this.button_frame_arr[0];\n                user_data.user_data.land[this.land_index].land_state = \"wait_cut\";\n                break;\n            case \"plant\":\n                this.button.children[0].getComponent(cc.Sprite).spriteFrame = this.button_frame_arr[1];\n                break;\n            case \"wait_till\":\n                this.button.children[0].getComponent(cc.Sprite).spriteFrame = this.button_frame_arr[2];\n                break;\n\n        };\n        this.button.active = true;\n        this.unschedule(this.water_schedule);\n    },\n    //cutting\n    cut: function () {\n        if (user_data.user_data.land[this.land_index].land_state !== \"wait_cut\") {\n            return;\n        };\n        user_data.user_data.land[this.land_index].land_state = \"cuting\";\n        var land_state = user_data.user_data.land[this.land_index].land_state\n        this.button.active = false;\n        var cut_time = config.plant[this.plant_type].cut_time * (1 - user_data.user_data.skill[\"speed_the_cut\"] / 100);\n        var now_time = 0;\n        var bar = this.plant_progress_node.getComponent(cc.ProgressBar);\n        this.cut_schedule = function () {\n            now_time += 0.1;\n            if (now_time >= cut_time && land_state == \"cuting\") {\n                now_time = 0;\n                user_data.user_data.land[this.land_index].land_state = \"cut_over\";\n                this.sound_control.play_sound_effect(\"cut_over\");\n                this.unschedule(this.cut_schedule);\n                this.rest_plat_alive_stage();\n                var node = this.game_scene_js.create_light_effect(this.node, 1, this.plant_type);\n                \n                if (node != null) {\n                    node.getComponent(\"light\").ini_node(this.plant_type, this.node);\n                };\n                return;\n            } else {\n                bar.progress = now_time / cut_time;\n                var progress_num = parseInt(bar.progress * 100);\n                this.plant_progress_label.string = \"Harvesting \" + progress_num + \"%\";\n            };\n        };\n        this.schedule(this.cut_schedule, 0.1);\n    },\n    //按钮被点击\n    on_button_click: function () {\n        this.sound_control.play_sound_effect(\"button_click\");\n        switch (this.button.state) {\n            case \"wait_cut\":\n                this.cut();\n                break;\n            case \"plant\":\n                var node = this.game_scene_js.create_plant_ui(this.game_scene_js.node);\n                if (node != null) {\n                    node.getComponent(\"plant_ui\").ini_node(this.land_index);\n                };\n                break;\n            case \"wait_till\":\n                this.till();\n                break;\n            default:\n                return;\n        };\n    },\n    //浇水\n    watering: function () {\n        this.water_buff = 2;\n        this.water_progress_node.active = true;\n        var all_water = config.all_water_num;\n        var bar = this.water_progress_node.getComponent(cc.ProgressBar);\n        this.water_schedule = function () {\n            if (user_data.user_data.land[this.land_index].land_state == \"grow\") {\n                var water_num = user_data.user_data.land[this.land_index].water_num;\n                // if (user_data.user_data.land[this.land_index].have_water == 0) water_num = 0;//ktra xem ô đất còn nước k\n                user_data.user_data.land[this.land_index].water_num -= 0.1 * (1 - user_data.user_data.skill[\"water_saving\"] / 100);\n                water_num = user_data.user_data.land[this.land_index].water_num;\n                if (water_num <= 0) {\n                    this.unschedule(this.water_schedule);\n                    this.water_buff = 1;\n                    user_data.user_data.land[this.land_index].water_num = 0;\n                    // user_data.user_data.land[this.land_index].have_water = 0;   // lưu trạng thái có nước hay k của ô đất\n                    // console.log(\"hello \" + user_data.user_data.land[this.land_index].have_water)\n                    return;\n                } else {\n                    bar.progress = water_num / all_water;\n                };\n            } else {\n                this.unschedule(this.water_schedule);\n                return;\n            };\n        };\n        this.schedule(this.water_schedule, 0.1);\n    },\n    water_charge: function () {\n        if (this.water_state == null) {\n            this.unschedule(this.water_schedule);\n            this.water_state = \"charge\";\n            var all_water = config.all_water_num;\n            var bar = this.water_progress_node.getComponent(cc.ProgressBar);\n            var callback = function () {\n                var now_water = user_data.user_data.land[this.land_index].water_num\n                user_data.user_data.land[this.land_index].water_num += 1;\n                user_data.user_data.land[this.land_index].have_water = 1;\n                if (now_water >= all_water) {\n                    this.unschedule(callback);\n                    user_data.user_data.land[this.land_index].water_num = all_water;\n                    this.water_state = null;\n                    if (user_data.user_data.land[this.land_index].land_state == \"cut\") {\n                        //\n                    } else {\n                        this.watering();\n                    };\n                    return;\n                };\n                bar.progress = now_water / all_water;\n            };\n            this.schedule(callback, 0.1);\n        } else if (this.water_state == \"charge\") {\n            user_data.user_data.land[this.land_index].water_num += 10;\n        };\n    },\n    //初始化节点\n    ini_node: function (index) {\n        this.sound_control = cc.find(\"sound_control\").getComponent(\"sound_control\");\n        var have = user_data.user_data.land[index].have;\n        this.land_index = index;\n        this.plant_type = user_data.user_data.land[this.land_index].plant_type;\n        var land_state = user_data.user_data.land[this.land_index].land_state;\n        this.plant_index = 0; //植物索引\n        this.plant_count = 0; //生长编号\n        this.water_buff = 1;  // 初始化水buff\n        this.water_state = null;\n        this.plant_frame_arr = [\n            this.plant0_frame_arr,\n            this.plant1_frame_arr,\n            this.plant2_frame_arr,\n            this.plant3_frame_arr,\n            this.plant4_frame_arr,\n            this.plant5_frame_arr,\n            this.plant6_frame_arr,\n            this.plant7_frame_arr,\n        ];\n        switch (have) {\n            case 0:\n                this.tips_node.active = true;\n                this.node.getComponent(cc.Sprite).spriteFrame = this.land_frame_arr[0];\n                this.plant_node.active = false;\n                this.plant_progress_node.active = false;\n                this.water_progress_node.active = false;\n                break;\n            case 1:\n                //till state\n                this.tips_node.active = false;\n                switch (land_state) {\n                    case \"wait_till\":\n                        this.plant_node.active = false;\n                        this.plant_progress_node.active = false;\n                        this.water_progress_node.active = false;\n                        this.node.getComponent(cc.Sprite).spriteFrame = this.land_frame_arr[0];\n                        this.wait_next(\"wait_till\");\n                        break;\n                    case \"wait_plant\":\n                        this.node.getComponent(cc.Sprite).spriteFrame = this.land_frame_arr[1];\n                        this.plant_progress_node.active = true;\n                        this.water_progress_node.active = true;\n                        // var bar = this.water_progress_node.getComponent(cc.ProgressBar);\n                        // if (user_data.user_data.land[this.land_index].have_water == 0) bar.progress = 0;\n                        this.plant_progress_label.string = \"Waiting to be planted\";\n                        this.wait_next(\"plant\");\n                        break;\n                    case \"wait_cut\":\n                        this.node.getComponent(cc.Sprite).spriteFrame = this.land_frame_arr[1];\n                        this.plant_node.active = true;\n                        this.plant_progress_node.active = true;\n                        this.water_progress_node.active = true;\n                        // var bar = this.water_progress_node.getComponent(cc.ProgressBar);\n                        // if (user_data.user_data.land[this.land_index].have_water == 0) bar.progress = 0;\n                        this.plant_progress_label.string = \"Waiting for harvest\";\n                        this.plant_progress_node.getComponent(cc.ProgressBar).progress = 1;\n                        for (var i = 0; i < this.plant_node.children.length; i++) {\n                            this.plant_node.children[i].getComponent(cc.Sprite).spriteFrame = this.plant_frame_arr[this.plant_type][3];\n                        };\n                        this.wait_next(\"wait_cut\");\n                        break;\n                    default:\n                        this.set_plant();\n                        this.node.getComponent(cc.Sprite).spriteFrame = this.land_frame_arr[1];\n                        // cc.log(land_state);\n                        return;\n\n                };\n                break;\n        };\n\n    },\n    //耕地\n    till: function () {\n        //只允许触发一次\n        if (user_data.user_data.land[this.land_index].land_state !== \"tilling\") {\n            user_data.user_data.land[this.land_index].land_state = \"tilling\";\n            var land_state = user_data.user_data.land[this.land_index].land_state;\n            user_data.user_data.land[this.land_index].alive_stage = 0;\n            this.plant_index = 0;\n            this.plant_count = 0;\n            //停掉所有的计时器\n            this.unschedule(this.water_schedule);\n            this.unschedule(this.plant_grow_schedule);\n            this.unschedule(this.cut_schedule);\n            this.unschedule(this.plant_schedule);\n            this.plant_node.active = false;\n            this.button.active = false;\n            var till_time = config.till_time * (1 - user_data.user_data.skill[\"tool_improve\"] / 100);\n            var bar = this.plant_progress_node.getComponent(cc.ProgressBar);\n            var now_time = 0;\n            this.plant_progress_node.active = true;\n            this.water_progress_node.active = true;\n            this.node.getComponent(cc.Sprite).spriteFrame = this.land_frame_arr[0];\n            var callback = function () {\n                now_time += 0.1;\n                if (now_time >= till_time && land_state == \"tilling\") {\n                    //                    cc.log(\"till over\");\n                    this.unschedule(callback);\n                    this.node.getComponent(cc.Sprite).spriteFrame = this.land_frame_arr[1];\n                    this.plant_progress_label.string = \"Waiting to be planted\";\n                    this.wait_next(\"plant\");\n                } else {\n                    bar.progress = now_time / till_time;\n                    var progress_num = parseInt(bar.progress * 100);\n                    this.plant_progress_label.string = \"In the ground \" + progress_num + \"%\";\n                };\n            };\n            this.schedule(callback, 0.1);\n        } else {\n            return;\n        };\n    },\n    //种植\n    plant: function (plant_index) {\n        user_data.user_data.land[this.land_index].land_state = \"wait_plant\";\n        user_data.user_data.land[this.land_index].plant_type = plant_index;\n        this.plant_type = plant_index;\n        user_data.user_data.land[this.land_index].alive_stage = 0;\n        var now_time = 0;\n        var plant_time = config.plant[plant_index].plant_time * (1 - user_data.user_data.skill[\"tool_improve\"] / 100);\n        var bar = this.plant_progress_node.getComponent(cc.ProgressBar);\n        this.button.active = false;\n        this.plant_schedule = function () {\n            now_time += 0.1;\n            if (now_time >= plant_time) {\n                cc.log(\"plant_over\");\n                this.unschedule(this.plant_schedule);\n                this.set_plant();\n            } else {\n                bar.progress = now_time / plant_time;\n                var progress_num = parseInt(bar.progress * 100);\n                this.plant_progress_label.string = \"Planting \" + progress_num + \"%\";\n            };\n        };\n        this.schedule(this.plant_schedule, 0.1);\n    },\n    onLoad() {\n        this.game_scene_js = cc.find(\"UI_ROOT\").getComponent(\"game_scene\");\n\n    },\n\n    start() {\n    },\n\n    // update (dt) {},\n});\n"]}