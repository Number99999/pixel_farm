{"version":3,"sources":["assets\\script\\ui\\gift_ui.js"],"names":["user_data","require","cc","Class","Component","properties","center_node","Node","exit_button_node","introduce_label","Label","ini_node","ad_control","find","getComponent","game_scene_js","game_rules_js","sound_control","show_bannerAd","scale","active","level","string","tween","to","easing","call","scheduleOnce","start","on_i_wanner_ad_button_click","play_sound_effect","show_videoAd","video_succes","on_exit_button_click","hide_bannerAd","node","destroy","wx","callback","video_state","video_tag","add_ex","create_tips_ui","now_ex","skill_point","set_ex_progress","unschedule","schedule"],"mappings":"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","sourceRoot":"/","sourcesContent":["var user_data = require(\"user_data\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        center_node: cc.Node,\n        exit_button_node: cc.Node,\n        introduce_label: cc.Label,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n    ini_node() {\n        this.ad_control = cc.find(\"ad_control\").getComponent(\"ad_control\");\n        this.game_scene_js = cc.find(\"UI_ROOT\").getComponent(\"game_scene\");\n        this.game_rules_js = cc.find(\"UI_ROOT\").getComponent(\"game_rules\");\n        this.sound_control = cc.find(\"sound_control\").getComponent(\"sound_control\");\n        this.ad_control.show_bannerAd();\n        this.center_node.scale = 0;\n        this.exit_button_node.active = false;\n        if (user_data.user_data.level < 15) {\n            this.introduce_label.string = \"Watch short commercials, \\ncurrent rating+1\";\n        } else {\n            this.introduce_label.string = \"Watch short commercials and \\ngain half-level experience\";\n        };\n        cc.tween(this.center_node)\n            .to(0.3, { scale: 1 }, { easing: \"elasticOut\" })\n            .call(() => {\n                this.scheduleOnce(() => {\n                    this.exit_button_node.active = true;\n                }, 1.5)\n            })\n            .start();\n    },\n    //我要看视频按钮被点击\n    on_i_wanner_ad_button_click() {\n        this.sound_control.play_sound_effect(\"button_click\");\n        this.ad_control.show_videoAd(\"gift_ad\");\n        this.video_succes();\n    },\n    //exit button\n    on_exit_button_click() {\n        this.sound_control.play_sound_effect(\"button_exit\");\n        this.ad_control.hide_bannerAd();\n        this.node.destroy();\n    },\n    //检测视频是否播放成功\n    video_succes: function () {\n        if (typeof (wx) != \"undefined\") {\n            var callback = function () {\n                if (this.ad_control.video_state == 1 && this.ad_control.video_tag == \"gift_ad\") {\n                    this.ad_control.video_tag = null;\n                    this.ad_control.video_state = 2;\n                    if (user_data.user_data.level > 15) {\n                        this.game_rules_js.add_ex(user_data.user_data.level);\n                        this.game_scene_js.create_tips_ui(this.game_scene_js.node, \"gift_ad_ex\");\n                    } else {\n                        user_data.user_data.level++;\n                        user_data.user_data.now_ex = 0;\n                        user_data.user_data.skill_point++;\n                        this.game_rules_js.set_ex_progress();\n                        this.game_scene_js.create_tips_ui(this.game_scene_js.node, \"gift_ad_level\");\n                    };\n                    this.ad_control.hide_bannerAd();\n                    this.unschedule(callback);\n                    this.node.destroy();\n                } else {\n                    if (this.ad_control.video_tag == null && this.ad_control.video_state == 2) {\n                        this.unschedule(callback);\n                    };\n                };\n            };\n            this.schedule(callback, 0.2);\n        };\n    },\n    // onLoad () {},\n\n    start() {\n\n    },\n\n    // update (dt) {},\n});\n"]}