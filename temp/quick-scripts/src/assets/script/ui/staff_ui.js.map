{"version":3,"sources":["assets\\script\\ui\\staff_ui.js"],"names":["user_data","require","cc","Class","Component","properties","staff_group_node","Node","staff_content_prefab","Prefab","have_tips_group","buy_tips_group","ini_node","game_scene_js","find","getComponent","ad_control","sound_control","update_buy_tips","set_icon","i","children","length","land","have","color","Button","interactable","staff","active","arr","Object","keys","gold","config","cost","update_schedule","callback","schedule","on_staff_click","e","staff_index","play_sound_effect","node","instantiate","parent","touch_exit","on_node_kill","onLoad","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["var user_data = require(\"user_data\");\r\nimport config from \"config\";\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        staff_group_node: cc.Node,\r\n        staff_content_prefab: cc.Prefab,\r\n        have_tips_group: cc.Node,\r\n        buy_tips_group: cc.Node,\r\n    },\r\n    //\r\n    ini_node: function () {\r\n        this.game_scene_js = cc.find(\"UI_ROOT\").getComponent(\"game_scene\");\r\n        this.ad_control = cc.find(\"ad_control\").getComponent(\"ad_control\");\r\n        this.sound_control = cc.find(\"sound_control\").getComponent(\"sound_control\");\r\n        this.update_buy_tips();\r\n        this.set_icon();\r\n    },\r\n    //\r\n    set_icon: function () {\r\n        for (var i = 0; i < this.staff_group_node.children.length; i++) {\r\n            if (user_data.user_data.land[i].have == 1) {\r\n                this.staff_group_node.children[i].color = new cc.color(255, 255, 255);\r\n                this.staff_group_node.children[i].getComponent(cc.Button).interactable = true;\r\n                if (user_data.user_data.staff[i].have == 1) {\r\n                    this.have_tips_group.children[i].active = true;\r\n                };\r\n            } else {\r\n                this.staff_group_node.children[i].color = new cc.color(0, 0, 0);\r\n                this.staff_group_node.children[i].getComponent(cc.Button).interactable = false;;\r\n                this.have_tips_group.children[i].active = false;\r\n            };\r\n        };\r\n    },\r\n    //刷新购买提示\r\n    update_buy_tips() {\r\n        var arr = Object.keys(user_data.user_data.land);\r\n        for (var i = 0; i < arr.length; i++) {\r\n            //已解锁土地 金币满足，且未拥有才会显示\r\n            if (user_data.user_data.land[i].have == 1 && user_data.user_data.gold >= config.staff[i].cost && user_data.user_data.staff[i].have == 0) {\r\n                this.buy_tips_group.children[i].active = true;\r\n            } else {\r\n                this.buy_tips_group.children[i].active = false;\r\n            };\r\n        };\r\n    },\r\n    //刷新数据定时器\r\n    update_schedule() {\r\n        var callback = function () {\r\n            this.update_buy_tips();\r\n            this.set_icon();\r\n        };\r\n        this.schedule(callback, 0.5);\r\n    },\r\n    //\r\n    on_staff_click: function (e, staff_index) {\r\n        this.sound_control.play_sound_effect(\"button_click\");\r\n        var node = cc.instantiate(this.staff_content_prefab);\r\n        node.getComponent(\"staff_content\").ini_node(staff_index);\r\n        node.parent = this.node;\r\n    },\r\n    touch_exit: function () {\r\n        this.sound_control.play_sound_effect(\"button_exit\");\r\n\r\n        this.game_scene_js.on_node_kill(this.node);\r\n    },\r\n    onLoad() {\r\n\r\n    },\r\n\r\n    start() {\r\n        this.update_schedule();\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}