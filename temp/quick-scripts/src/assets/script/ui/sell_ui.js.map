{"version":3,"sources":["assets\\script\\ui\\sell_ui.js"],"names":["user_data","require","config","cc","Class","Component","properties","box_frame_arr","SpriteFrame","icon_group_node","Node","label_group_node","lock_group_node","confirm_button_node","sum_gold","sum_diamond","index","ini_node","game_scene_js","find","getComponent","game_rules_js","adsManager_js","ad_control","sound_control","set_sell","button_unlock_click","e","custom","node","children","active","show_comfirm_buy","Number","i","wareHouse","have","type_buy","cost","Label","string","buy_repo","gold","diamond","count","create_tips_ui","add_gold","add_diamond","touch_exit","all_capacity","length","id_product","Sprite","spriteFrame","play_sound_effect","on_node_kill","set_estimate_label","sum","sell","plant","estimate_label","on_sell_button_click","j","on_double_sell_button_click","showRewardedVideo","video_succes","wx","callback","video_state","video_tag","unschedule","schedule","onLoad","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["var user_data = require(\"user_data\");\r\nvar config = require(\"config\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        box_frame_arr: [cc.SpriteFrame],\r\n        icon_group_node: cc.Node,\r\n        label_group_node: cc.Node,\r\n        // estimate_label: cc.Label,\r\n        lock_group_node: cc.Node,\r\n        confirm_button_node: cc.Node,\r\n        sum_gold: 0,\r\n        sum_diamond: 0,\r\n        index: 0,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    ini_node: function () {\r\n        this.game_scene_js = cc.find(\"UI_ROOT\").getComponent(\"game_scene\");\r\n        this.game_rules_js = cc.find(\"UI_ROOT\").getComponent(\"game_rules\");\r\n        this.adsManager_js = cc.find(\"UI_ROOT\").getComponent(\"AdsManager\");\r\n        this.ad_control = cc.find(\"ad_control\").getComponent(\"ad_control\");\r\n        this.sound_control = cc.find(\"sound_control\").getComponent(\"sound_control\");\r\n        this.set_sell();\r\n        // this.set_estimate_label();\r\n    },\r\n    button_unlock_click(e, custom) {        // button unlock repo\r\n        // if (custom <= 7) {\r\n        this.node.children[2].active = false;   // show POP-UP open new repo\r\n        this.node.children[3].active = true;    // hidden repo\r\n        this.show_comfirm_buy(custom);\r\n        // }\r\n        // else\r\n        //     this.game_scene_js.create_tips_ui(this.game_scene_js.node, \"cant_unlock_repo\");\r\n    },\r\n    show_comfirm_buy: function (custom) {       // hiển thị số tiền để mua rương, thêm nút xác nhận\r\n        this.sum_gold = Number(0);\r\n        this.sum_diamond = Number(0);\r\n        // var sum_diamond = 0;\r\n        for (var i = 0; i <= custom; i++) {\r\n            if (user_data.user_data.wareHouse[i].have == 0) {\r\n                if (user_data.user_data.wareHouse[i].type_buy == \"gold\")\r\n                    this.sum_gold += user_data.user_data.wareHouse[i].cost;\r\n                else this.sum_diamond += user_data.user_data.wareHouse[i].cost;\r\n                // cc.log(\"43 index \" + i + \" cost \" + user_data.user_data.wareHouse[i].cost);\r\n            }\r\n        }\r\n        this.node.children[3].children[0].getComponent(cc.Label).string = \"Do you want use \" + this.sum_gold + \" gold and \" + this.sum_diamond + \" diamond to buy new repository?\";\r\n        this.index = custom;\r\n    },\r\n    buy_repo: function () {\r\n        if (user_data.user_data.gold >= this.sum_gold && user_data.user_data.diamond >= this.sum_diamond) {\r\n            // console.log(\"sum_godl \" + sum_gold);\r\n            // user_data.user_data.diamond -= this.sum_diamond;\r\n            for (var i = 0; i <= this.index; i++) {\r\n                user_data.user_data.wareHouse[i].have = 1;\r\n                this.lock_group_node.children[i].active = false;\r\n                this.label_group_node.children[i].getComponent(cc.Label).string = user_data.user_data.wareHouse[i].count + \"/30\";\r\n                this.game_scene_js.create_tips_ui(this.game_scene_js.node, \"unlocked_repo\");\r\n            }\r\n            this.game_rules_js.add_gold(-this.sum_gold);\r\n            this.game_rules_js.add_diamond(-this.sum_diamond);\r\n            this.touch_exit();\r\n        }\r\n        else if (user_data.user_data.gold < this.gold) {\r\n            this.game_scene_js.create_tips_ui(this.game_scene_js.node, \"no_money_gold\");\r\n        }\r\n        else if (user_data.user_data.diamond, this.diamond)\r\n            this.game_scene_js.create_tips_ui(this.game_scene_js.node, \"no_money_diamond\");\r\n        else this.game_scene_js.create_tips_ui(this.game_scene_js.node, \"no_money\");\r\n    },\r\n    // auto_sell: function () {    // tự động bán hàng trong kho // chưa xong\r\n    //     var time_auto = 60 * 60;\r\n\r\n    //     var auto = function () {\r\n    //         time_auto -=0.1;\r\n    //     };\r\n    //     this.schedule(this.auto, 0.1);\r\n    // },\r\n\r\n    set_sell: function () {\r\n        var all_capacity = 30;\r\n        for (var i = 0; i < this.icon_group_node.children.length; i++) {\r\n            if (user_data.user_data.wareHouse[i].have == 1) {\r\n                let count = user_data.user_data.wareHouse[i].count;\r\n                this.label_group_node.children[i].getComponent(cc.Label).string = count + \"/\" + all_capacity;\r\n                this.lock_group_node.children[i].active = false;\r\n\r\n                if (count > 0) {\r\n                    var id_product = user_data.user_data.wareHouse[i].id_product;\r\n                    this.icon_group_node.children[i].getComponent(cc.Sprite).spriteFrame = this.box_frame_arr[id_product];\r\n                }\r\n                else {\r\n                    this.icon_group_node.children[i].getComponent(cc.Sprite).spriteFrame = this.box_frame_arr[8];\r\n                }\r\n            }\r\n            else {\r\n                this.label_group_node.children[i].getComponent(cc.Label).string = '';\r\n                this.lock_group_node.children[i].active = true;\r\n                this.icon_group_node.children[i].getComponent(cc.Sprite).SpriteFrame = this.box_frame_arr[8];\r\n            }\r\n\r\n        }\r\n    },\r\n    touch_exit: function () {\r\n        if (this.node.children[2].active == false) {\r\n            this.node.children[2].active = true;\r\n            this.node.children[3].active = false;\r\n        }\r\n        else {\r\n            this.sound_control.play_sound_effect(\"button_exit\");\r\n            this.game_scene_js.on_node_kill(this.node);\r\n        }\r\n\r\n    },\r\n    //设置预计卖出文字\r\n    set_estimate_label: function () {\r\n        var sum = 0;\r\n        for (var i = 0; i < this.icon_group_node.children.length; i++) {\r\n            var count = user_data.user_data.wareHouse[i].count;\r\n            var sell = config.plant[i].sell;\r\n            sum += count * sell;\r\n        };\r\n        this.estimate_label.string = \"Expected to sell: \" + sum;\r\n    },\r\n    //普通卖出\r\n    on_sell_button_click: function () {\r\n        this.sound_control.play_sound_effect(\"button_click\");\r\n        var sum = 0;\r\n        for (var i = 0; i < this.icon_group_node.children.length; i++) {\r\n            var count = user_data.user_data.wareHouse[i].count;\r\n            var id_product = user_data.user_data.wareHouse[i].id_product;// lấy id của cây trong mỗi kho\r\n            if (id_product > 7) continue;\r\n            var sell = config.plant[id_product].sell;\r\n            sum += count * sell;\r\n        };\r\n        if (sum == 0) {\r\n            this.game_scene_js.create_tips_ui(this.game_rules_js.node, \"no_sell\");\r\n        } else {\r\n            for (var j = 0; j < this.icon_group_node.children.length; j++) {\r\n                user_data.user_data.wareHouse[j].count = 0;\r\n            };\r\n            this.game_scene_js.create_tips_ui(this.game_rules_js.node, \"gold\", sum);\r\n            this.game_rules_js.add_gold(sum);\r\n            this.set_sell();\r\n        };\r\n    },\r\n\r\n    //double_sell_button_click\r\n    on_double_sell_button_click() {\r\n        this.sound_control.play_sound_effect(\"button_click\");\r\n        this.adsManager_js.showRewardedVideo(() => {\r\n            var sum = 0;\r\n            for (var i = 0; i < this.icon_group_node.children.length; i++) {\r\n                var count = user_data.user_data.wareHouse[i].count;\r\n                var id_product = user_data.user_data.wareHouse[i].id_product;// lấy id của cây trong mỗi kho\r\n                if (id_product > 7) continue;\r\n                var sell = config.plant[id_product].sell;\r\n                sum += count * sell;\r\n            };\r\n            if (sum == 0) {\r\n                this.game_scene_js.create_tips_ui(this.game_rules_js.node, \"no_sell\");\r\n            } else {\r\n                for (var j = 0; j < this.icon_group_node.children.length; j++) {\r\n                    user_data.user_data.wareHouse[j].count = 0;\r\n                };\r\n                this.game_scene_js.create_tips_ui(this.game_rules_js.node, \"gold\", sum);\r\n                this.game_rules_js.add_gold(sum * 2);\r\n                this.set_sell();\r\n            };\r\n        });\r\n    },\r\n\r\n    //检测视频是否播放成功\r\n    video_succes: function () {\r\n        if (typeof (wx) != \"undefined\") {\r\n            var callback = function () {\r\n                if (this.ad_control.video_state == 1 && this.ad_control.video_tag == \"double_sell\") {\r\n                    this.ad_control.video_tag = null;\r\n                    this.ad_control.video_state = 2;\r\n                    var sum = 0;\r\n                    for (var i = 0; i < this.icon_group_node.children.length; i++) {\r\n                        var count = user_data.user_data.wareHouse[i].count;\r\n                        var sell = config.plant[i].sell;\r\n                        sum += count * sell;\r\n                    };\r\n                    for (var j = 0; j < this.icon_group_node.children.length; j++) {\r\n                        user_data.user_data.wareHouse[j].count = 0;\r\n                    };\r\n                    this.game_scene_js.create_tips_ui(this.game_rules_js.node, \"gold\", sum * 2);\r\n                    this.game_rules_js.add_gold(sum * 2);\r\n                    this.set_sell();\r\n                    this.unschedule(callback);\r\n                } else {\r\n                    if (this.ad_control.video_tag == null && this.ad_control.video_state == 2) {\r\n                        this.unschedule(callback);\r\n                    };\r\n                };\r\n            };\r\n            this.schedule(callback, 0.2);\r\n        };\r\n    },\r\n    onLoad() {\r\n\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}